{
    "sourceFile": "src/renderer/src/components/SideBar/components/FileList.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 45,
            "patches": [
                {
                    "date": 1666066869538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1666066923654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,20 +1,22 @@\n-import React, { useEffect } from 'react'\n+import React, { useEffect, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n import { useUpdateHeaders } from '../hooks/useUpdateHeader'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n   show: boolean\n   setShowFileList: (show: boolean) => void\n }> = ({ fileList, setShowFileList, show }) => {\n+  const [file,setFile] = useState(0)\n   const openFile = (filePath) => {\n     window.api.clickFileList(filePath)\n     setShowFileList(!show)\n+    setFile(Math.random())\n   }\n   useEffect(() => {\n     useUpdateHeaders()\n-  }, [])\n+  }, [file])\n   return (\n     <ul className=\"file-list\">\n       {fileList.map(({ fileName, filePath }) => {\n         return (\n"
                },
                {
                    "date": 1666066937610,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n     setShowFileList(!show)\n     setFile(Math.random())\n   }\n   useEffect(() => {\n+    console.log('effff')\n     useUpdateHeaders()\n   }, [file])\n   return (\n     <ul className=\"file-list\">\n"
                },
                {
                    "date": 1666067054765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,18 +6,12 @@\n   fileList: IFileList\n   show: boolean\n   setShowFileList: (show: boolean) => void\n }> = ({ fileList, setShowFileList, show }) => {\n-  const [file,setFile] = useState(0)\n   const openFile = (filePath) => {\n     window.api.clickFileList(filePath)\n     setShowFileList(!show)\n-    setFile(Math.random())\n   }\n-  useEffect(() => {\n-    console.log('effff')\n-    useUpdateHeaders()\n-  }, [file])\n   return (\n     <ul className=\"file-list\">\n       {fileList.map(({ fileName, filePath }) => {\n         return (\n"
                },
                {
                    "date": 1666067068424,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,6 @@\n-import React, { useEffect, useState } from 'react'\n+import React from 'react'\n import { IFileList } from 'src/preload/index.d'\n-import { useUpdateHeaders } from '../hooks/useUpdateHeader'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n   show: boolean\n"
                },
                {
                    "date": 1666340291202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import { useOpenFile } from '@renderer/common/useOpenFile'\n import React from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n export const FileList: React.FC<{\n@@ -6,9 +7,9 @@\n   show: boolean\n   setShowFileList: (show: boolean) => void\n }> = ({ fileList, setShowFileList, show }) => {\n   const openFile = (filePath) => {\n-    window.api.clickFileList(filePath)\n+    useOpenFile(filePath)\n     setShowFileList(!show)\n   }\n   return (\n     <ul className=\"file-list\">\n"
                },
                {
                    "date": 1666361592462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,14 +3,12 @@\n import { IFileList } from 'src/preload/index.d'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n-  show: boolean\n-  setShowFileList: (show: boolean) => void\n-}> = ({ fileList, setShowFileList, show }) => {\n+\n+}> = ({ fileList}) => {\n   const openFile = (filePath) => {\n     useOpenFile(filePath)\n-    setShowFileList(!show)\n   }\n   return (\n     <ul className=\"file-list\">\n       {fileList.map(({ fileName, filePath }) => {\n"
                },
                {
                    "date": 1666363092238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import { useOpenFile } from '@renderer/common/useOpenFile'\n+import { useToggleSideBar } from '@renderer/common/useToggleSideBar'\n import React from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n export const FileList: React.FC<{\n@@ -7,8 +8,9 @@\n \n }> = ({ fileList}) => {\n   const openFile = (filePath) => {\n     useOpenFile(filePath)\n+    useToggleSideBar()\n   }\n   return (\n     <ul className=\"file-list\">\n       {fileList.map(({ fileName, filePath }) => {\n"
                },
                {
                    "date": 1666365155878,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import { useOpenFile } from '@renderer/common/useOpenFile'\n import { useToggleSideBar } from '@renderer/common/useToggleSideBar'\n import React from 'react'\n import { IFileList } from 'src/preload/index.d'\n+import { NewFile } from './NewFile'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n \n@@ -26,7 +27,8 @@\n             <span>{fileName}</span>\n           </li>\n         )\n       })}\n+      <NewFile/>\n     </ul>\n   )\n }\n"
                },
                {
                    "date": 1666367735967,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,28 @@\n import { useOpenFile } from '@renderer/common/useOpenFile'\n import { useToggleSideBar } from '@renderer/common/useToggleSideBar'\n-import React from 'react'\n+import React, { useEffect, useRef, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n import { NewFile } from './NewFile'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n-\n-}> = ({ fileList}) => {\n+}> = ({ fileList }) => {\n   const openFile = (filePath) => {\n     useOpenFile(filePath)\n     useToggleSideBar()\n   }\n+  const [showNewFile, setShowNewFile] = useState(false)\n+  const iptRef = useRef<HTMLInputElement>(null)\n+  useEffect(() => {\n+    iptRef.current?.focus()\n+    const handeReturn = (e: KeyboardEvent) => {\n+      if (e.code === 'Enter') {\n+        setShowNewFile(false)\n+        \n+      }\n+    }\n+  }, [])\n   return (\n     <ul className=\"file-list\">\n       {fileList.map(({ fileName, filePath }) => {\n         return (\n@@ -27,8 +37,17 @@\n             <span>{fileName}</span>\n           </li>\n         )\n       })}\n-      <NewFile/>\n+      {showNewFile && (\n+        <li\n+          style={{\n+            display: 'flex'\n+          }}\n+          className=\"new-file\"\n+        >\n+          <input ref={iptRef} style={{}} type=\"text\" />\n+        </li>\n+      )}\n     </ul>\n   )\n }\n"
                },
                {
                    "date": 1666404951085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n+import { NewFileSvg } from '@renderer/common/svg'\n import { useOpenFile } from '@renderer/common/useOpenFile'\n import { useToggleSideBar } from '@renderer/common/useToggleSideBar'\n import React, { useEffect, useRef, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n-import { NewFile } from './NewFile'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n }> = ({ fileList }) => {\n@@ -17,37 +17,43 @@\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter') {\n         setShowNewFile(false)\n-        \n       }\n     }\n   }, [])\n   return (\n-    <ul className=\"file-list\">\n-      {fileList.map(({ fileName, filePath }) => {\n-        return (\n+    <>\n+      <ul className=\"file-list\">\n+        {fileList.map(({ fileName, filePath }) => {\n+          return (\n+            <li\n+              key={filePath}\n+              onClick={(e) => {\n+                e.stopPropagation()\n+                openFile(filePath)\n+              }}\n+            >\n+              <div></div>\n+              <span>{fileName}</span>\n+            </li>\n+          )\n+        })}\n+        {showNewFile && (\n           <li\n-            key={filePath}\n-            onClick={(e) => {\n-              e.stopPropagation()\n-              openFile(filePath)\n+            style={{\n+              display: 'flex'\n             }}\n+            className=\"new-file\"\n           >\n-            <div></div>\n-            <span>{fileName}</span>\n+            <input ref={iptRef} style={{}} type=\"text\" />\n           </li>\n-        )\n-      })}\n-      {showNewFile && (\n-        <li\n-          style={{\n-            display: 'flex'\n-          }}\n-          className=\"new-file\"\n-        >\n-          <input ref={iptRef} style={{}} type=\"text\" />\n-        </li>\n-      )}\n-    </ul>\n+        )}\n+      </ul>\n+      <footer>\n+        <NewFileSvg/>\n+        <span>footer</span>\n+        <NewFileSvg/>\n+      </footer>\n+    </>\n   )\n }\n"
                },
                {
                    "date": 1666405770893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,11 +49,11 @@\n           </li>\n         )}\n       </ul>\n       <footer>\n-        <NewFileSvg/>\n+        <NewFileSvg onClick={() => setShowNewFile(true)} />\n         <span>footer</span>\n-        <NewFileSvg/>\n+        <NewFileSvg onClick={() => setShowNewFile(true)} />\n       </footer>\n     </>\n   )\n }\n"
                },
                {
                    "date": 1666408407673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,12 @@\n import { NewFileSvg } from '@renderer/common/svg'\n-import { useOpenFile } from '@renderer/common/useOpenFile'\n-import { useToggleSideBar } from '@renderer/common/useToggleSideBar'\n import React, { useEffect, useRef, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n-}> = ({ fileList }) => {\n-  const openFile = (filePath) => {\n-    useOpenFile(filePath)\n-    useToggleSideBar()\n-  }\n+  openFile:(filePath:string) => void\n+}> = ({ fileList,openFile }) => {\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1666422010388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,11 @@\n     }\n   }, [])\n   return (\n     <>\n-      <ul className=\"file-list\">\n+      <ul className=\"file-list\" style={{\n+                paddingBottom:'50px'\n+      }}>\n         {fileList.map(({ fileName, filePath }) => {\n           return (\n             <li\n               key={filePath}\n@@ -45,9 +47,9 @@\n         )}\n       </ul>\n       <footer>\n         <NewFileSvg onClick={() => setShowNewFile(true)} />\n-        <span>footer</span>\n+        <span>Markdowns</span>\n         <NewFileSvg onClick={() => setShowNewFile(true)} />\n       </footer>\n     </>\n   )\n"
                },
                {
                    "date": 1666422094441,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,13 +37,17 @@\n         })}\n         {showNewFile && (\n           <li\n             style={{\n-              display: 'flex'\n+              display: 'flex',\n+              justifyContent:'center',\n+              alignItems:'center',\n             }}\n             className=\"new-file\"\n           >\n-            <input ref={iptRef} style={{}} type=\"text\" />\n+            <input ref={iptRef} style={{\n+              height:'80%'\n+            }} type=\"text\" />\n           </li>\n         )}\n       </ul>\n       <footer>\n"
                },
                {
                    "date": 1666422118503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,9 @@\n           <li\n             style={{\n               display: 'flex',\n               justifyContent:'center',\n-              alignItems:'center',\n+              paddingLeft:'20px'\n             }}\n             className=\"new-file\"\n           >\n             <input ref={iptRef} style={{\n"
                },
                {
                    "date": 1666422143883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n         {showNewFile && (\n           <li\n             style={{\n               display: 'flex',\n-              justifyContent:'center',\n+              alignItems:'center',\n               paddingLeft:'20px'\n             }}\n             className=\"new-file\"\n           >\n"
                },
                {
                    "date": 1666422165305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,10 @@\n             }}\n             className=\"new-file\"\n           >\n             <input ref={iptRef} style={{\n-              height:'80%'\n+              height:'80%',\n+              paddingLeft:'4px'\n             }} type=\"text\" />\n           </li>\n         )}\n       </ul>\n"
                },
                {
                    "date": 1666422789261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,25 +3,31 @@\n import { IFileList } from 'src/preload/index.d'\n \n export const FileList: React.FC<{\n   fileList: IFileList\n-  openFile:(filePath:string) => void\n-}> = ({ fileList,openFile }) => {\n+  openFile: (filePath: string) => void\n+}> = ({ fileList, openFile }) => {\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n-      if (e.code === 'Enter') {\n+      if (e.code === 'Enter' && showNewFile) {\n         setShowNewFile(false)\n+        window.api.newFile(iptRef.current?.value || 'untitled' + '.md')\n       }\n     }\n-  }, [])\n+    document.addEventListener('keydown', handeReturn)\n+    return () => document.removeEventListener('keydown', handeReturn)\n+  }, [showNewFile])\n   return (\n     <>\n-      <ul className=\"file-list\" style={{\n-                paddingBottom:'50px'\n-      }}>\n+      <ul\n+        className=\"file-list\"\n+        style={{\n+          paddingBottom: '50px'\n+        }}\n+      >\n         {fileList.map(({ fileName, filePath }) => {\n           return (\n             <li\n               key={filePath}\n@@ -38,17 +44,21 @@\n         {showNewFile && (\n           <li\n             style={{\n               display: 'flex',\n-              alignItems:'center',\n-              paddingLeft:'20px'\n+              alignItems: 'center',\n+              paddingLeft: '20px'\n             }}\n             className=\"new-file\"\n           >\n-            <input ref={iptRef} style={{\n-              height:'80%',\n-              paddingLeft:'4px'\n-            }} type=\"text\" />\n+            <input\n+              ref={iptRef}\n+              style={{\n+                height: '80%',\n+                paddingLeft: '4px'\n+              }}\n+              type=\"text\"\n+            />\n           </li>\n         )}\n       </ul>\n       <footer>\n"
                },
                {
                    "date": 1666423430617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n         setShowNewFile(false)\n-        window.api.newFile(iptRef.current?.value || 'untitled' + '.md')\n+        window.api.newFile(iptRef.current?.value || 'untitled')\n       }\n     }\n     document.addEventListener('keydown', handeReturn)\n     return () => document.removeEventListener('keydown', handeReturn)\n"
                },
                {
                    "date": 1666423683889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n+        window.api.openDefaultDir()\n       }\n     }\n     document.addEventListener('keydown', handeReturn)\n     return () => document.removeEventListener('keydown', handeReturn)\n"
                },
                {
                    "date": 1666449632806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n export const FileList: React.FC<{\n   fileList: IFileList\n   openFile: (filePath: string) => void\n }> = ({ fileList, openFile }) => {\n+  console.log('fie')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1666449786434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n export const FileList: React.FC<{\n   fileList: IFileList\n   openFile: (filePath: string) => void\n }> = ({ fileList, openFile }) => {\n-  console.log('fie')\n+  console.log('file-list-render')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1666452648449,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,8 @@\n           >\n             <input\n               ref={iptRef}\n               style={{\n-                height: '80%',\n                 paddingLeft: '4px'\n               }}\n               type=\"text\"\n             />\n"
                },
                {
                    "date": 1666452726940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,20 +44,12 @@\n           )\n         })}\n         {showNewFile && (\n           <li\n-            style={{\n-              display: 'flex',\n-              alignItems: 'center',\n-              paddingLeft: '20px'\n-            }}\n             className=\"new-file\"\n           >\n             <input\n               ref={iptRef}\n-              style={{\n-                paddingLeft: '4px'\n-              }}\n               type=\"text\"\n             />\n           </li>\n         )}\n"
                },
                {
                    "date": 1666453120965,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n           </li>\n         )}\n       </ul>\n       <footer>\n-        <NewFileSvg onClick={() => setShowNewFile(true)} />\n+        <NewFileSvg onClick={() => setShowNewFile(!showNewFile)} />\n         <span>Markdowns</span>\n         <NewFileSvg onClick={() => setShowNewFile(true)} />\n       </footer>\n     </>\n"
                },
                {
                    "date": 1666509837802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,12 @@\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n       }\n     }\n+    const contextMenu = (e) =>{\n+      console.log('menu')\n+    }\n+    document.addEventListener('contextmenu',contextMenu)\n     document.addEventListener('keydown', handeReturn)\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n   return (\n"
                },
                {
                    "date": 1666511171480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,10 +17,11 @@\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n       }\n     }\n-    const contextMenu = (e) =>{\n-      console.log('menu')\n+    const contextMenu = (e:MouseEvent) =>{\n+      console.log(e.target)\n+      window.api.popFileListMenu('xxx')\n     }\n     document.addEventListener('contextmenu',contextMenu)\n     document.addEventListener('keydown', handeReturn)\n     return () => document.removeEventListener('keydown', handeReturn)\n"
                },
                {
                    "date": 1666511396796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n }> = ({ fileList, openFile }) => {\n   console.log('file-list-render')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n+  const fileListRef = useRef<HTMLUListElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n@@ -21,15 +22,16 @@\n     const contextMenu = (e:MouseEvent) =>{\n       console.log(e.target)\n       window.api.popFileListMenu('xxx')\n     }\n-    document.addEventListener('contextmenu',contextMenu)\n+    fileListRef.current?.addEventListener('contextmenu',contextMenu)\n     document.addEventListener('keydown', handeReturn)\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n   return (\n     <>\n       <ul\n+      ref={fileListRef}\n         className=\"file-list\"\n         style={{\n           paddingBottom: '50px'\n         }}\n@@ -38,8 +40,10 @@\n           return (\n             <li\n               key={filePath}\n               onClick={(e) => {\n+                console.log(e)\n+                console.log('click')\n                 e.stopPropagation()\n                 openFile(filePath)\n               }}\n             >\n"
                },
                {
                    "date": 1666511403586,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,9 @@\n     const contextMenu = (e:MouseEvent) =>{\n       console.log(e.target)\n       window.api.popFileListMenu('xxx')\n     }\n-    fileListRef.current?.addEventListener('contextmenu',contextMenu)\n-    document.addEventListener('keydown', handeReturn)\n+    // fileListRef.current?.addEventListener('contextmenu',contextMenu)\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n   return (\n     <>\n"
                },
                {
                    "date": 1666511770067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,11 @@\n   console.log('file-list-render')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   const fileListRef = useRef<HTMLUListElement>(null)\n+  const handleContextMenu = (filePath: string) => {\n+    window.api.popFileListMenu(filePath)\n+  }\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n@@ -18,19 +21,16 @@\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n       }\n     }\n-    const contextMenu = (e:MouseEvent) =>{\n-      console.log(e.target)\n-      window.api.popFileListMenu('xxx')\n-    }\n+\n     // fileListRef.current?.addEventListener('contextmenu',contextMenu)\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n   return (\n     <>\n       <ul\n-      ref={fileListRef}\n+        ref={fileListRef}\n         className=\"file-list\"\n         style={{\n           paddingBottom: '50px'\n         }}\n@@ -38,11 +38,10 @@\n         {fileList.map(({ fileName, filePath }) => {\n           return (\n             <li\n               key={filePath}\n+              onContextMenu={() => handleContextMenu(filePath)}\n               onClick={(e) => {\n-                console.log(e)\n-                console.log('click')\n                 e.stopPropagation()\n                 openFile(filePath)\n               }}\n             >\n@@ -51,15 +50,10 @@\n             </li>\n           )\n         })}\n         {showNewFile && (\n-          <li\n-            className=\"new-file\"\n-          >\n-            <input\n-              ref={iptRef}\n-              type=\"text\"\n-            />\n+          <li className=\"new-file\">\n+            <input ref={iptRef} type=\"text\" />\n           </li>\n         )}\n       </ul>\n       <footer>\n"
                },
                {
                    "date": 1666511822846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,11 +9,8 @@\n   console.log('file-list-render')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   const fileListRef = useRef<HTMLUListElement>(null)\n-  const handleContextMenu = (filePath: string) => {\n-    window.api.popFileListMenu(filePath)\n-  }\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n@@ -38,9 +35,9 @@\n         {fileList.map(({ fileName, filePath }) => {\n           return (\n             <li\n               key={filePath}\n-              onContextMenu={() => handleContextMenu(filePath)}\n+              onContextMenu={() => window.api.popFileListMenu(filePath)}\n               onClick={(e) => {\n                 e.stopPropagation()\n                 openFile(filePath)\n               }}\n"
                },
                {
                    "date": 1666513321402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n+        console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n       }\n"
                },
                {
                    "date": 1666513331413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,9 @@\n   const fileListRef = useRef<HTMLUListElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n+      console.log('KeyboardEvent')\n       if (e.code === 'Enter' && showNewFile) {\n         console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n"
                },
                {
                    "date": 1666513458120,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,10 +20,8 @@\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n       }\n     }\n-\n-    // fileListRef.current?.addEventListener('contextmenu',contextMenu)\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n   return (\n     <>\n@@ -37,9 +35,11 @@\n         {fileList.map(({ fileName, filePath }) => {\n           return (\n             <li\n               key={filePath}\n-              onContextMenu={() => window.api.popFileListMenu(filePath)}\n+              onContextMenu={() => {\n+                window.api.popFileListMenu(filePath)\n+              }}\n               onClick={(e) => {\n                 e.stopPropagation()\n                 openFile(filePath)\n               }}\n"
                },
                {
                    "date": 1666513463437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,8 +18,9 @@\n         console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n+        \n       }\n     }\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n"
                },
                {
                    "date": 1666513471034,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n         console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n-        \n       }\n     }\n     return () => document.removeEventListener('keydown', handeReturn)\n   }, [showNewFile])\n"
                },
                {
                    "date": 1666513491911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n         window.api.openDefaultDir()\n       }\n     }\n     return () => document.removeEventListener('keydown', handeReturn)\n-  }, [showNewFile])\n+  }, [])\n   return (\n     <>\n       <ul\n         ref={fileListRef}\n"
                },
                {
                    "date": 1666513595602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n }> = ({ fileList, openFile }) => {\n   console.log('file-list-render')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n-  const fileListRef = useRef<HTMLUListElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handeReturn = (e: KeyboardEvent) => {\n       console.log('KeyboardEvent')\n@@ -25,9 +24,8 @@\n   }, [])\n   return (\n     <>\n       <ul\n-        ref={fileListRef}\n         className=\"file-list\"\n         style={{\n           paddingBottom: '50px'\n         }}\n"
                },
                {
                    "date": 1666513650873,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,18 +10,18 @@\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n-    const handeReturn = (e: KeyboardEvent) => {\n-      console.log('KeyboardEvent')\n+    const handleReturn = (e: KeyboardEvent) => {\n       if (e.code === 'Enter' && showNewFile) {\n         console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n         window.api.openDefaultDir()\n       }\n     }\n-    return () => document.removeEventListener('keydown', handeReturn)\n+    document.addEventListener('keydown',handleReturn)\n+    return () => document.removeEventListener('keydown', handleReturn)\n   }, [])\n   return (\n     <>\n       <ul\n"
                },
                {
                    "date": 1666513798931,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,8 +35,9 @@\n             <li\n               key={filePath}\n               onContextMenu={() => {\n                 window.api.popFileListMenu(filePath)\n+                window.api.openDefaultDir()\n               }}\n               onClick={(e) => {\n                 e.stopPropagation()\n                 openFile(filePath)\n"
                },
                {
                    "date": 1666514231192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,9 @@\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n     iptRef.current?.focus()\n     const handleReturn = (e: KeyboardEvent) => {\n+      console.log('KeyboardEvent')\n       if (e.code === 'Enter' && showNewFile) {\n         console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n"
                },
                {
                    "date": 1666514270411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n       }\n     }\n     document.addEventListener('keydown',handleReturn)\n     return () => document.removeEventListener('keydown', handleReturn)\n-  }, [])\n+  }, [showNewFile])\n   return (\n     <>\n       <ul\n         className=\"file-list\"\n"
                },
                {
                    "date": 1666528976375,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,10 @@\n \n export const FileList: React.FC<{\n   fileList: IFileList\n   openFile: (filePath: string) => void\n-}> = ({ fileList, openFile }) => {\n+  updateFiles:()=>void\n+}> = ({ fileList, openFile,updateFiles }) => {\n   console.log('file-list-render')\n   const [showNewFile, setShowNewFile] = useState(false)\n   const iptRef = useRef<HTMLInputElement>(null)\n   useEffect(() => {\n@@ -16,9 +17,9 @@\n       if (e.code === 'Enter' && showNewFile) {\n         console.log('enter')\n         setShowNewFile(false)\n         window.api.newFile(iptRef.current?.value || 'untitled')\n-        window.api.openDefaultDir()\n+        updateFiles()\n       }\n     }\n     document.addEventListener('keydown',handleReturn)\n     return () => document.removeEventListener('keydown', handleReturn)\n"
                },
                {
                    "date": 1666529302944,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n             <li\n               key={filePath}\n               onContextMenu={() => {\n                 window.api.popFileListMenu(filePath)\n-                window.api.openDefaultDir()\n+                updateFiles()\n               }}\n               onClick={(e) => {\n                 e.stopPropagation()\n                 openFile(filePath)\n"
                },
                {
                    "date": 1666531744149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,8 @@\n             <li\n               key={filePath}\n               onContextMenu={() => {\n                 window.api.popFileListMenu(filePath)\n-                updateFiles()\n               }}\n               onClick={(e) => {\n                 e.stopPropagation()\n                 openFile(filePath)\n"
                }
            ],
            "date": 1666066869538,
            "name": "Commit-0",
            "content": "import React, { useEffect } from 'react'\nimport { IFileList } from 'src/preload/index.d'\nimport { useUpdateHeaders } from '../hooks/useUpdateHeader'\n\nexport const FileList: React.FC<{\n  fileList: IFileList\n  show: boolean\n  setShowFileList: (show: boolean) => void\n}> = ({ fileList, setShowFileList, show }) => {\n  const openFile = (filePath) => {\n    window.api.clickFileList(filePath)\n    setShowFileList(!show)\n  }\n  useEffect(() => {\n    useUpdateHeaders()\n  }, [])\n  return (\n    <ul className=\"file-list\">\n      {fileList.map(({ fileName, filePath }) => {\n        return (\n          <li\n            key={filePath}\n            onClick={(e) => {\n              e.stopPropagation()\n              openFile(filePath)\n            }}\n          >\n            <div></div>\n            <span>{fileName}</span>\n          </li>\n        )\n      })}\n    </ul>\n  )\n}\n"
        }
    ]
}