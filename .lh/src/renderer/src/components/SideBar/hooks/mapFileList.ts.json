{
    "sourceFile": "src/renderer/src/components/SideBar/hooks/mapFileList.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1667629577851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1667630414116,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,12 @@\n import { FileTree } from \"src/common/interface\"\n+const triangleDown = `<div>\n+<svg class='triangle-down' xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n+<path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n+</svg>\n+</div>`\n \n+\n export const mapFileList = (fileTree: FileTree) => {\n     const li = document.createElement('li')\n     // 隐藏打开的根文件夹\n     li.setAttribute('style', `--i: ${fileTree.level}`)\n"
                },
                {
                    "date": 1667635963217,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,7 @@\n-import { FileTree } from \"src/common/interface\"\n+\n+import { OPEN_FILE } from \"../../../../../common/eventType\"\n+import { FileTree } from \"../../../../../common/interface\"\n const triangleDown = `<div>\n <svg class='triangle-down' xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n </svg>\n@@ -18,8 +20,9 @@\n       li.classList.add('file-item')\n       li.appendChild(input)\n       li.addEventListener('click',(e)=>{\n         e.stopPropagation()\n+        window.api.sendToMain(OPEN_FILE,fileTree.path)\n         li.classList.toggle('show-input')\n         input.focus()\n       })\n       return li\n"
                },
                {
                    "date": 1667636031495,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n \n import { OPEN_FILE } from \"../../../../../common/eventType\"\n import { FileTree } from \"../../../../../common/interface\"\n+\n const triangleDown = `<div>\n <svg class='triangle-down' xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n </svg>\n"
                },
                {
                    "date": 1667636092688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,44 +1,42 @@\n+import { OPEN_FILE } from '../../../../../common/eventType'\n+import { FileTree } from '../../../../../common/interface'\n \n-import { OPEN_FILE } from \"../../../../../common/eventType\"\n-import { FileTree } from \"../../../../../common/interface\"\n-\n const triangleDown = `<div>\n <svg class='triangle-down' xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n </svg>\n </div>`\n \n-\n export const mapFileList = (fileTree: FileTree) => {\n-    const li = document.createElement('li')\n-    // 隐藏打开的根文件夹\n-    li.setAttribute('style', `--i: ${fileTree.level}`)\n-    const fileName = `<span>${fileTree.fileName}</span>`\n-    const input = document.createElement('input')\n-    if (fileTree.level === 0) li.style.display = 'none'\n-    if (!fileTree.isDir) {\n-      li.innerHTML = fileName\n-      li.classList.add('file-item')\n-      li.appendChild(input)\n-      li.addEventListener('click',(e)=>{\n-        e.stopPropagation()\n-        window.api.sendToMain(OPEN_FILE,fileTree.path)\n-        li.classList.toggle('show-input')\n-        input.focus()\n-      })\n-      return li\n-    } else {\n-      li.innerHTML = triangleDown + fileName\n-      li.classList.add('dir')\n-      const ul = document.createElement('ul')\n-      ul.addEventListener('click',e=>{\n-        e.stopPropagation()\n-        ul.classList.toggle('close')\n-      })\n-      ul.appendChild(li)\n-      fileTree.children.forEach((file) => {\n-        ul.appendChild(mapFileList(file))\n-      })\n-      return ul\n\\ No newline at end of file\n-    }\n-  }\n+  const li = document.createElement('li')\n+  // 隐藏打开的根文件夹\n+  li.setAttribute('style', `--i: ${fileTree.level}`)\n+  const fileName = `<span>${fileTree.fileName}</span>`\n+  const input = document.createElement('input')\n+  if (fileTree.level === 0) li.style.display = 'none'\n+  if (!fileTree.isDir) {\n+    li.innerHTML = fileName\n+    li.classList.add('file-item')\n+    li.appendChild(input)\n+    li.addEventListener('click', (e) => {\n+      e.stopPropagation()\n+      window.api.sendToMain(OPEN_FILE, fileTree.path)\n+      // li.classList.toggle('show-input')\n+      // input.focus()\n+    })\n+    return li\n+  } else {\n+    li.innerHTML = triangleDown + fileName\n+    li.classList.add('dir')\n+    const ul = document.createElement('ul')\n+    ul.addEventListener('click', (e) => {\n+      e.stopPropagation()\n+      ul.classList.toggle('close')\n+    })\n+    ul.appendChild(li)\n+    fileTree.children.forEach((file) => {\n+      ul.appendChild(mapFileList(file))\n+    })\n+    return ul\n+  }\n+}\n"
                },
                {
                    "date": 1667637655409,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { OPEN_FILE } from '../../../../../common/eventType'\n+import { OPEN_FILE, RENAME_FILE } from '../../../../../common/eventType'\n import { FileTree } from '../../../../../common/interface'\n \n const triangleDown = `<div>\n <svg class='triangle-down' xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n@@ -17,13 +17,25 @@\n   if (!fileTree.isDir) {\n     li.innerHTML = fileName\n     li.classList.add('file-item')\n     li.appendChild(input)\n+    li.addEventListener('contextmenu',()=>{\n+      li.classList.toggle('show-input')\n+    })\n     li.addEventListener('click', (e) => {\n       e.stopPropagation()\n       window.api.sendToMain(OPEN_FILE, fileTree.path)\n-      // li.classList.toggle('show-input')\n-      // input.focus()\n+      const handleChange = () => {\n+        window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n+      }\n+      input.focus()\n+      input.onblur = () => {\n+        handleChange()\n+      }\n+      input.onkeydown = (e) => {\n+        console.log(e)\n+        // handleChange()\n+      }\n     })\n     return li\n   } else {\n     li.innerHTML = triangleDown + fileName\n"
                },
                {
                    "date": 1667637689093,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     li.addEventListener('click', (e) => {\n       e.stopPropagation()\n       window.api.sendToMain(OPEN_FILE, fileTree.path)\n       const handleChange = () => {\n-        window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n+        // window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n       }\n       input.focus()\n       input.onblur = () => {\n         handleChange()\n"
                },
                {
                    "date": 1667637861515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,24 +17,25 @@\n   if (!fileTree.isDir) {\n     li.innerHTML = fileName\n     li.classList.add('file-item')\n     li.appendChild(input)\n-    li.addEventListener('contextmenu',()=>{\n+    li.addEventListener('contextmenu', () => {\n       li.classList.toggle('show-input')\n     })\n     li.addEventListener('click', (e) => {\n       e.stopPropagation()\n       window.api.sendToMain(OPEN_FILE, fileTree.path)\n       const handleChange = () => {\n-        // window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n+        window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n       }\n       input.focus()\n       input.onblur = () => {\n         handleChange()\n       }\n       input.onkeydown = (e) => {\n-        console.log(e)\n-        // handleChange()\n+        if (e.code === 'Enter') {\n+          handleChange()\n+        } \n       }\n     })\n     return li\n   } else {\n"
                },
                {
                    "date": 1667637987812,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     li.addEventListener('click', (e) => {\n       e.stopPropagation()\n       window.api.sendToMain(OPEN_FILE, fileTree.path)\n       const handleChange = () => {\n-        window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n+      !input.value && window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n       }\n       input.focus()\n       input.onblur = () => {\n         handleChange()\n"
                },
                {
                    "date": 1667638093663,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,8 +32,9 @@\n         handleChange()\n       }\n       input.onkeydown = (e) => {\n         if (e.code === 'Enter') {\n+          console.log('enter')\n           handleChange()\n         } \n       }\n     })\n"
                },
                {
                    "date": 1667638267086,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     li.addEventListener('click', (e) => {\n       e.stopPropagation()\n       window.api.sendToMain(OPEN_FILE, fileTree.path)\n       const handleChange = () => {\n-      !input.value && window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n+      input.value && window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n       }\n       input.focus()\n       input.onblur = () => {\n         handleChange()\n"
                },
                {
                    "date": 1667638925476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,8 +29,9 @@\n       }\n       input.focus()\n       input.onblur = () => {\n         handleChange()\n+        li.classList.toggle('show-input')\n       }\n       input.onkeydown = (e) => {\n         if (e.code === 'Enter') {\n           console.log('enter')\n"
                },
                {
                    "date": 1667640824611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,53 +5,53 @@\n <svg class='triangle-down' xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n </svg>\n </div>`\n-\n-export const mapFileList = (fileTree: FileTree) => {\n+const newFileItemLi = (fileName: string, level: number, path: string) => {\n   const li = document.createElement('li')\n-  // 隐藏打开的根文件夹\n-  li.setAttribute('style', `--i: ${fileTree.level}`)\n-  const fileName = `<span>${fileTree.fileName}</span>`\n+  li.setAttribute('style', `--i: ${level}`)\n+  li.innerHTML = `<span>${fileName}</span>`\n+  li.classList.add('file-item')\n   const input = document.createElement('input')\n-  if (fileTree.level === 0) li.style.display = 'none'\n-  if (!fileTree.isDir) {\n-    li.innerHTML = fileName\n-    li.classList.add('file-item')\n-    li.appendChild(input)\n-    li.addEventListener('contextmenu', () => {\n+  input.value = fileName\n+  const handleChange = () => {\n+    input.value && window.api.sendToMain(RENAME_FILE, path, input.value)\n+  }\n+  li.addEventListener('contextmenu', () => {\n+    li.classList.toggle('show-input')\n+  })\n+  li.addEventListener('click', (e) => {\n+    e.stopPropagation()\n+    window.api.sendToMain(OPEN_FILE, path)\n+    input.focus()\n+    input.onblur = () => {\n+      handleChange()\n       li.classList.toggle('show-input')\n-    })\n-    li.addEventListener('click', (e) => {\n-      e.stopPropagation()\n-      window.api.sendToMain(OPEN_FILE, fileTree.path)\n-      const handleChange = () => {\n-      input.value && window.api.sendToMain(RENAME_FILE, fileTree.path, input.value)\n-      }\n-      input.focus()\n-      input.onblur = () => {\n+    }\n+    input.onkeydown = (e) => {\n+      if (e.code === 'Enter') {\n         handleChange()\n-        li.classList.toggle('show-input')\n       }\n-      input.onkeydown = (e) => {\n-        if (e.code === 'Enter') {\n-          console.log('enter')\n-          handleChange()\n-        } \n-      }\n-    })\n-    return li\n-  } else {\n-    li.innerHTML = triangleDown + fileName\n-    li.classList.add('dir')\n-    const ul = document.createElement('ul')\n-    ul.addEventListener('click', (e) => {\n-      e.stopPropagation()\n-      ul.classList.toggle('close')\n-    })\n-    ul.appendChild(li)\n-    fileTree.children.forEach((file) => {\n-      ul.appendChild(mapFileList(file))\n-    })\n-    return ul\n-  }\n+    }\n+  })\n+  return li\n }\n+export const mapFileList = (fileTree: FileTree) => {\n+  if (!fileTree.isDir) return newFileItemLi(fileTree.fileName, fileTree.level, fileTree.path)\n+  const li = document.createElement('li')\n+  // 不显示根文件夹\n+  if (fileTree.level === 0) li.style.display = 'none'\n+  li.setAttribute('style', `--i: ${fileTree.level}`)\n+  li.innerHTML = `<span>${fileTree.fileName}</span>`\n+  li.innerHTML = triangleDown + fileTree.fileName\n+  li.classList.add('dir')\n+  const ul = document.createElement('ul')\n+  ul.addEventListener('click', (e) => {\n+    e.stopPropagation()\n+    ul.classList.toggle('close')\n+  })\n+  ul.appendChild(li)\n+  fileTree.children.forEach((file) => {\n+    ul.appendChild(mapFileList(file))\n+  })\n+  return ul\n+}\n"
                },
                {
                    "date": 1667640851019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,10 @@\n <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n </svg>\n </div>`\n const newFileItemLi = (fileName: string, level: number, path: string) => {\n+    // 不显示根文件夹\n+    if (fileTree.level === 0) li.style.display = 'none'\n   const li = document.createElement('li')\n   li.setAttribute('style', `--i: ${level}`)\n   li.innerHTML = `<span>${fileName}</span>`\n   li.classList.add('file-item')\n"
                },
                {
                    "date": 1667640859642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,10 +7,10 @@\n </svg>\n </div>`\n const newFileItemLi = (fileName: string, level: number, path: string) => {\n     // 不显示根文件夹\n-    if (fileTree.level === 0) li.style.display = 'none'\n   const li = document.createElement('li')\n+  if (level === 0) li.style.display = 'none'\n   li.setAttribute('style', `--i: ${level}`)\n   li.innerHTML = `<span>${fileName}</span>`\n   li.classList.add('file-item')\n   const input = document.createElement('input')\n"
                },
                {
                    "date": 1667640932336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,12 @@\n export const mapFileList = (fileTree: FileTree) => {\n   if (!fileTree.isDir) return newFileItemLi(fileTree.fileName, fileTree.level, fileTree.path)\n   const li = document.createElement('li')\n   // 不显示根文件夹\n-  if (fileTree.level === 0) li.style.display = 'none'\n+  if (fileTree.level === 0) {\n+    console.log('0')\n+    li.style.display = 'none'\n+  }\n   li.setAttribute('style', `--i: ${fileTree.level}`)\n   li.innerHTML = `<span>${fileTree.fileName}</span>`\n   li.innerHTML = triangleDown + fileTree.fileName\n   li.classList.add('dir')\n"
                },
                {
                    "date": 1667641003932,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,10 +41,10 @@\n   if (!fileTree.isDir) return newFileItemLi(fileTree.fileName, fileTree.level, fileTree.path)\n   const li = document.createElement('li')\n   // 不显示根文件夹\n   if (fileTree.level === 0) {\n-    console.log('0')\n     li.style.display = 'none'\n+    console.log()\n   }\n   li.setAttribute('style', `--i: ${fileTree.level}`)\n   li.innerHTML = `<span>${fileTree.fileName}</span>`\n   li.innerHTML = triangleDown + fileTree.fileName\n"
                },
                {
                    "date": 1667641024737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,9 @@\n   const li = document.createElement('li')\n   // 不显示根文件夹\n   if (fileTree.level === 0) {\n     li.style.display = 'none'\n+    li.style.backgroundColor= 'red'\n     console.log()\n   }\n   li.setAttribute('style', `--i: ${fileTree.level}`)\n   li.innerHTML = `<span>${fileTree.fileName}</span>`\n"
                },
                {
                    "date": 1667641058213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,8 +43,9 @@\n   // 不显示根文件夹\n   if (fileTree.level === 0) {\n     li.style.display = 'none'\n     li.style.backgroundColor= 'red'\n+    li.style.marginLeft = '100px'\n     console.log()\n   }\n   li.setAttribute('style', `--i: ${fileTree.level}`)\n   li.innerHTML = `<span>${fileTree.fileName}</span>`\n"
                },
                {
                    "date": 1667641073164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n   if (fileTree.level === 0) {\n     li.style.display = 'none'\n     li.style.backgroundColor= 'red'\n     li.style.marginLeft = '100px'\n-    console.log()\n+    console.log(li)\n   }\n   li.setAttribute('style', `--i: ${fileTree.level}`)\n   li.innerHTML = `<span>${fileTree.fileName}</span>`\n   li.innerHTML = triangleDown + fileTree.fileName\n"
                },
                {
                    "date": 1667641101916,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,19 +39,20 @@\n }\n export const mapFileList = (fileTree: FileTree) => {\n   if (!fileTree.isDir) return newFileItemLi(fileTree.fileName, fileTree.level, fileTree.path)\n   const li = document.createElement('li')\n-  // 不显示根文件夹\n-  if (fileTree.level === 0) {\n-    li.style.display = 'none'\n-    li.style.backgroundColor= 'red'\n-    li.style.marginLeft = '100px'\n-    console.log(li)\n-  }\n+\n   li.setAttribute('style', `--i: ${fileTree.level}`)\n   li.innerHTML = `<span>${fileTree.fileName}</span>`\n   li.innerHTML = triangleDown + fileTree.fileName\n   li.classList.add('dir')\n+    // 不显示根文件夹\n+    if (fileTree.level === 0) {\n+      li.style.display = 'none'\n+      li.style.backgroundColor= 'red'\n+      li.style.marginLeft = '100px'\n+      console.log(li)\n+    }\n   const ul = document.createElement('ul')\n   ul.addEventListener('click', (e) => {\n     e.stopPropagation()\n     ul.classList.toggle('close')\n"
                },
                {
                    "date": 1667641115295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,11 +47,8 @@\n   li.classList.add('dir')\n     // 不显示根文件夹\n     if (fileTree.level === 0) {\n       li.style.display = 'none'\n-      li.style.backgroundColor= 'red'\n-      li.style.marginLeft = '100px'\n-      console.log(li)\n     }\n   const ul = document.createElement('ul')\n   ul.addEventListener('click', (e) => {\n     e.stopPropagation()\n"
                },
                {
                    "date": 1667641127099,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,8 @@\n <path fillRule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n </svg>\n </div>`\n const newFileItemLi = (fileName: string, level: number, path: string) => {\n-    // 不显示根文件夹\n   const li = document.createElement('li')\n   if (level === 0) li.style.display = 'none'\n   li.setAttribute('style', `--i: ${level}`)\n   li.innerHTML = `<span>${fileName}</span>`\n"
                }
            ],
            "date": 1667629577851,
            "name": "Commit-0",
            "content": "import { FileTree } from \"src/common/interface\"\n\nexport const mapFileList = (fileTree: FileTree) => {\n    const li = document.createElement('li')\n    // 隐藏打开的根文件夹\n    li.setAttribute('style', `--i: ${fileTree.level}`)\n    const fileName = `<span>${fileTree.fileName}</span>`\n    const input = document.createElement('input')\n    if (fileTree.level === 0) li.style.display = 'none'\n    if (!fileTree.isDir) {\n      li.innerHTML = fileName\n      li.classList.add('file-item')\n      li.appendChild(input)\n      li.addEventListener('click',(e)=>{\n        e.stopPropagation()\n        li.classList.toggle('show-input')\n        input.focus()\n      })\n      return li\n    } else {\n      li.innerHTML = triangleDown + fileName\n      li.classList.add('dir')\n      const ul = document.createElement('ul')\n      ul.addEventListener('click',e=>{\n        e.stopPropagation()\n        ul.classList.toggle('close')\n      })\n      ul.appendChild(li)\n      fileTree.children.forEach((file) => {\n        ul.appendChild(mapFileList(file))\n      })\n      return ul\n    }\n  }"
        }
    ]
}