{
    "sourceFile": "src/renderer/src/components/Search/SearchFile.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 139,
            "patches": [
                {
                    "date": 1666160968450,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1666161144448,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,10 @@\n-export const SearchFile = () => {\n+import { IFileList } from \"src/preload/index.d\"\n+\n+interface ISearchFile {\n+    fileList:IFileList\n+}\n+export const SearchFile = ({fileList}) => {\n   return (\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666161193986,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,13 @@\n-import { IFileList } from \"src/preload/index.d\"\n+import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n-    fileList:IFileList\n+  fileList: IFileList\n }\n-export const SearchFile = ({fileList}) => {\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n+  const files = fileList.map((file) => {\n+    return <li>{file.fileName}</li>\n+  })\n   return (\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666161200921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,8 @@\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n       </div>\n-      <ul></ul>\n+      <ul>{files}</ul>\n     </div>\n   )\n }\n"
                },
                {
                    "date": 1666161356837,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import { useEffect } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n@@ -6,8 +7,16 @@\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   const files = fileList.map((file) => {\n     return <li>{file.fileName}</li>\n   })\n+  useEffect(()=>{\n+\n+    const hanldeKeyDown = (e) =>{\n+        console.log(e)\n+    }\n+    document.addEventListener('keydown',hanldeKeyDown)\n+    return document.removeEventListener('keydown',hanldeKeyDown)\n+  },[])\n   return (\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666161371831,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,16 +7,15 @@\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   const files = fileList.map((file) => {\n     return <li>{file.fileName}</li>\n   })\n-  useEffect(()=>{\n-\n-    const hanldeKeyDown = (e) =>{\n-        console.log(e)\n+  useEffect(() => {\n+    const hanldeKeyDown = (e:KeyboardEvent) => {\n+      console.log(e)\n     }\n-    document.addEventListener('keydown',hanldeKeyDown)\n-    return document.removeEventListener('keydown',hanldeKeyDown)\n-  },[])\n+    document.addEventListener('keydown', hanldeKeyDown)\n+    return document.removeEventListener('keydown', hanldeKeyDown)\n+  }, [])\n   return (\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666161933425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   const files = fileList.map((file) => {\n-    return <li>{file.fileName}</li>\n+    return <li key={file.filePath}><span>{file.fileName}</span></li>\n   })\n   useEffect(() => {\n     const hanldeKeyDown = (e:KeyboardEvent) => {\n       console.log(e)\n"
                },
                {
                    "date": 1666161953544,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,11 @@\n     const hanldeKeyDown = (e:KeyboardEvent) => {\n       console.log(e)\n     }\n     document.addEventListener('keydown', hanldeKeyDown)\n-    return document.removeEventListener('keydown', hanldeKeyDown)\n+    return ()=>{\n+        document.removeEventListener('keydown', hanldeKeyDown)\n+    }\n   }, [])\n   return (\n     <div className=\"search-file\">\n       <div>\n"
                },
                {
                    "date": 1666162183545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,13 @@\n     return <li key={file.filePath}><span>{file.fileName}</span></li>\n   })\n   useEffect(() => {\n     const hanldeKeyDown = (e:KeyboardEvent) => {\n+      if(e.code==='ArrowUp') {}\n+      if(e.code===\"ArrowDown\"){}\n+      if(e.code==='KeyP' && e.metaKey) {\n+        document.querySelector('.search-file')?.classList.toggle('.search-file-close')\n+      }\n       console.log(e)\n     }\n     document.addEventListener('keydown', hanldeKeyDown)\n     return ()=>{\n"
                },
                {
                    "date": 1666162211592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,9 @@\n     const hanldeKeyDown = (e:KeyboardEvent) => {\n       if(e.code==='ArrowUp') {}\n       if(e.code===\"ArrowDown\"){}\n       if(e.code==='KeyP' && e.metaKey) {\n+        console.log('commend + P')\n         document.querySelector('.search-file')?.classList.toggle('.search-file-close')\n       }\n       console.log(e)\n     }\n"
                },
                {
                    "date": 1666162228822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n       if(e.code==='ArrowUp') {}\n       if(e.code===\"ArrowDown\"){}\n       if(e.code==='KeyP' && e.metaKey) {\n         console.log('commend + P')\n-        document.querySelector('.search-file')?.classList.toggle('.search-file-close')\n+        document.querySelector('.search-file')?.classList.toggle('search-file-close')\n       }\n       console.log(e)\n     }\n     document.addEventListener('keydown', hanldeKeyDown)\n"
                },
                {
                    "date": 1666162263202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,23 +7,23 @@\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   const files = fileList.map((file) => {\n     return <li key={file.filePath}><span>{file.fileName}</span></li>\n   })\n-  useEffect(() => {\n-    const hanldeKeyDown = (e:KeyboardEvent) => {\n-      if(e.code==='ArrowUp') {}\n-      if(e.code===\"ArrowDown\"){}\n-      if(e.code==='KeyP' && e.metaKey) {\n-        console.log('commend + P')\n-        document.querySelector('.search-file')?.classList.toggle('search-file-close')\n-      }\n-      console.log(e)\n-    }\n-    document.addEventListener('keydown', hanldeKeyDown)\n-    return ()=>{\n-        document.removeEventListener('keydown', hanldeKeyDown)\n-    }\n-  }, [])\n+//   useEffect(() => {\n+//     const hanldeKeyDown = (e:KeyboardEvent) => {\n+//       if(e.code==='ArrowUp') {}\n+//       if(e.code===\"ArrowDown\"){}\n+//       if(e.code==='KeyP' && e.metaKey) {\n+//         console.log('commend + P')\n+//         document.querySelector('.search-file')?.classList.toggle('search-file-close')\n+//       }\n+//       console.log(e)\n+//     }\n+//     document.addEventListener('keydown', hanldeKeyDown)\n+//     return ()=>{\n+//         document.removeEventListener('keydown', hanldeKeyDown)\n+//     }\n+//   }, [])\n   return (\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666163352691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { useEffect } from 'react'\n+\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n@@ -7,23 +7,8 @@\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   const files = fileList.map((file) => {\n     return <li key={file.filePath}><span>{file.fileName}</span></li>\n   })\n-//   useEffect(() => {\n-//     const hanldeKeyDown = (e:KeyboardEvent) => {\n-//       if(e.code==='ArrowUp') {}\n-//       if(e.code===\"ArrowDown\"){}\n-//       if(e.code==='KeyP' && e.metaKey) {\n-//         console.log('commend + P')\n-//         document.querySelector('.search-file')?.classList.toggle('search-file-close')\n-//       }\n-//       console.log(e)\n-//     }\n-//     document.addEventListener('keydown', hanldeKeyDown)\n-//     return ()=>{\n-//         document.removeEventListener('keydown', hanldeKeyDown)\n-//     }\n-//   }, [])\n   return (\n     <div className=\"search-file\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666190589786,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,19 @@\n-\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   const files = fileList.map((file) => {\n-    return <li key={file.filePath}><span>{file.fileName}</span></li>\n+    return (\n+      <li key={file.filePath}>\n+        <span>{file.fileName}</span>\n+      </li>\n+    )\n   })\n   return (\n-    <div className=\"search-file\">\n+    <div className=\"search-file search-file-close\">\n       <div>\n         <input type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n"
                },
                {
                    "date": 1666338772361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import { useEffect, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n@@ -10,8 +11,18 @@\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n+  const hanleSelect = (e:KeyboardEvent) =>{\n+    const files = document.querySelector('.search-file ul li')\n+    console.log(files)\n+\n+  }\n+  useEffect(()=>{\n+\n+    document.addEventListener('keydown',hanleSelect)\n+    return () => document.removeEventListener('keydown',hanleSelect)\n+  },[])\n   return (\n     <div className=\"search-file search-file-close\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666338794431,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { useEffect, useState } from 'react'\n+import { useEffect} from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n"
                },
                {
                    "date": 1666338814477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,13 +16,13 @@\n     const files = document.querySelector('.search-file ul li')\n     console.log(files)\n \n   }\n-  useEffect(()=>{\n+  // useEffect(()=>{\n \n-    document.addEventListener('keydown',hanleSelect)\n-    return () => document.removeEventListener('keydown',hanleSelect)\n-  },[])\n+  //   document.addEventListener('keydown',hanleSelect)\n+  //   return () => document.removeEventListener('keydown',hanleSelect)\n+  // },[])\n   return (\n     <div className=\"search-file search-file-close\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666338830226,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,13 +16,13 @@\n     const files = document.querySelector('.search-file ul li')\n     console.log(files)\n \n   }\n-  // useEffect(()=>{\n+  useEffect(()=>{\n \n-  //   document.addEventListener('keydown',hanleSelect)\n-  //   return () => document.removeEventListener('keydown',hanleSelect)\n-  // },[])\n+    document.addEventListener('keydown',hanleSelect)\n+    return () => document.removeEventListener('keydown',hanleSelect)\n+  },[])\n   return (\n     <div className=\"search-file search-file-close\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666339302486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,28 +1,38 @@\n-import { useEffect} from 'react'\n+import { useEffect, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n-  const files = fileList.map((file) => {\n+  const [active, setActiveFile] = useState(0)\n+  const files = fileList.map((file, index) => {\n     return (\n-      <li key={file.filePath}>\n+      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n-  const hanleSelect = (e:KeyboardEvent) =>{\n-    const files = document.querySelector('.search-file ul li')\n-    console.log(files)\n-\n+  const hanleSelect = (e: KeyboardEvent) => {\n+    const files = document.querySelectorAll<HTMLElement>('.search-file ul li') \n+    if (e.code === 'ArrowUp') {\n+      console.log('up')\n+      files[active]?.classList.toggle('active')\n+      files[active-1]?.classList.toggle('active')\n+      setActiveFile(active-1)\n+    }\n+    if (e.code === 'ArrowDown') {\n+      console.log('down')\n+      files[active]?.classList.toggle('active')\n+      files[active+1]?.classList.toggle('active')\n+      setActiveFile(active+1)\n+    }\n   }\n-  useEffect(()=>{\n-\n-    document.addEventListener('keydown',hanleSelect)\n-    return () => document.removeEventListener('keydown',hanleSelect)\n-  },[])\n+  useEffect(() => {\n+    document.addEventListener('keydown', hanleSelect)\n+    return () => document.removeEventListener('keydown', hanleSelect)\n+  }, [])\n   return (\n     <div className=\"search-file search-file-close\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666339379978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,16 +16,16 @@\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li') \n     if (e.code === 'ArrowUp') {\n       console.log('up')\n-      files[active]?.classList.toggle('active')\n-      files[active-1]?.classList.toggle('active')\n+      files[active]?.classList.remove('active')\n+      files[active-1]?.classList.add('active')\n       setActiveFile(active-1)\n     }\n     if (e.code === 'ArrowDown') {\n       console.log('down')\n-      files[active]?.classList.toggle('active')\n-      files[active+1]?.classList.toggle('active')\n+      files[active]?.classList.remove('active')\n+      files[active+1]?.classList.add('active')\n       setActiveFile(active+1)\n     }\n   }\n   useEffect(() => {\n"
                },
                {
                    "date": 1666339460387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,10 +22,10 @@\n       setActiveFile(active-1)\n     }\n     if (e.code === 'ArrowDown') {\n       console.log('down')\n-      files[active]?.classList.remove('active')\n-      files[active+1]?.classList.add('active')\n+      files[active].classList.remove('active')\n+      files[active+1].classList.add('active')\n       setActiveFile(active+1)\n     }\n   }\n   useEffect(() => {\n"
                },
                {
                    "date": 1666339491071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,14 +16,15 @@\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li') \n     if (e.code === 'ArrowUp') {\n       console.log('up')\n-      files[active]?.classList.remove('active')\n-      files[active-1]?.classList.add('active')\n+      files[active].classList.remove('active')\n+      files[active-1].classList.add('active')\n       setActiveFile(active-1)\n     }\n     if (e.code === 'ArrowDown') {\n       console.log('down')\n+      console.log(active)\n       files[active].classList.remove('active')\n       files[active+1].classList.add('active')\n       setActiveFile(active+1)\n     }\n"
                },
                {
                    "date": 1666339560631,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n interface ISearchFile {\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n-  const [active, setActiveFile] = useState(0)\n+  let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n@@ -18,16 +18,16 @@\n     if (e.code === 'ArrowUp') {\n       console.log('up')\n       files[active].classList.remove('active')\n       files[active-1].classList.add('active')\n-      setActiveFile(active-1)\n+      active-=1\n     }\n     if (e.code === 'ArrowDown') {\n       console.log('down')\n       console.log(active)\n       files[active].classList.remove('active')\n       files[active+1].classList.add('active')\n-      setActiveFile(active+1)\n+      active+=1\n     }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666339718260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,21 +13,31 @@\n       </li>\n     )\n   })\n   const hanleSelect = (e: KeyboardEvent) => {\n-    const files = document.querySelectorAll<HTMLElement>('.search-file ul li') \n+    const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     if (e.code === 'ArrowUp') {\n       console.log('up')\n       files[active].classList.remove('active')\n-      files[active-1].classList.add('active')\n-      active-=1\n+      if (!files[active - 1]) {\n+        active = files.length - 1\n+        files[active].classList.add('active')\n+      } else {\n+        files[active - 1].classList.add('active')\n+        active -= 1\n+      }\n     }\n     if (e.code === 'ArrowDown') {\n       console.log('down')\n       console.log(active)\n       files[active].classList.remove('active')\n-      files[active+1].classList.add('active')\n-      active+=1\n+      if (!files[active + 1]) {\n+        active = 0\n+        files[active].classList.add('active')\n+      } else {\n+        files[active + 1].classList.add('active')\n+        active += 1\n+      }\n     }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666340117257,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n       </li>\n     )\n   })\n   const hanleSelect = (e: KeyboardEvent) => {\n+    console.log(e)\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     if (e.code === 'ArrowUp') {\n       console.log('up')\n       files[active].classList.remove('active')\n"
                },
                {
                    "date": 1666340353750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,5 @@\n+import { useOpenFile } from '@renderer/common/useOpenFile'\n import { useEffect, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n@@ -38,8 +39,12 @@\n         files[active + 1].classList.add('active')\n         active += 1\n       }\n     }\n+    if(e.code ==='Enter') {\n+      const filePath = fileList[active].filePath\n+      useOpenFile(filePath)\n+    }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666340373522,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,8 +40,9 @@\n         active += 1\n       }\n     }\n     if(e.code ==='Enter') {\n+      console.log('enter')\n       const filePath = fileList[active].filePath\n       useOpenFile(filePath)\n     }\n   }\n"
                },
                {
                    "date": 1666340405783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,8 +41,9 @@\n       }\n     }\n     if(e.code ==='Enter') {\n       console.log('enter')\n+      console.log(fileList[active])\n       const filePath = fileList[active].filePath\n       useOpenFile(filePath)\n     }\n   }\n"
                },
                {
                    "date": 1666340445753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n       }\n     }\n     if(e.code ==='Enter') {\n       console.log('enter')\n-      console.log(fileList[active])\n+      console.log(fileList)\n       const filePath = fileList[active].filePath\n       useOpenFile(filePath)\n     }\n   }\n"
                },
                {
                    "date": 1666340578021,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,13 +39,13 @@\n         files[active + 1].classList.add('active')\n         active += 1\n       }\n     }\n-    if(e.code ==='Enter') {\n-      console.log('enter')\n-      console.log(fileList)\n+    if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n+      document.querySelector('')\n       useOpenFile(filePath)\n+      document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666340611443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,8 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n-      document.querySelector('')\n       useOpenFile(filePath)\n       document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n"
                },
                {
                    "date": 1666340617020,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,8 +41,9 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n+      console.log(fileList[active])\n       useOpenFile(filePath)\n       document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n"
                },
                {
                    "date": 1666340692418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,8 @@\n       </li>\n     )\n   })\n   const hanleSelect = (e: KeyboardEvent) => {\n-    console.log(e)\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     if (e.code === 'ArrowUp') {\n       console.log('up')\n       files[active].classList.remove('active')\n"
                },
                {
                    "date": 1666340729955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,10 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n-      console.log(fileList[active])\n+      console.log(fileList)\n+      // console.log(fileList[active])\n       useOpenFile(filePath)\n       document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n"
                },
                {
                    "date": 1666340773993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,10 +39,11 @@\n         active += 1\n       }\n     }\n     if (e.code === 'Enter') {\n+      console.log(fileList)\n+\n       const filePath = fileList[active].filePath\n-      console.log(fileList)\n       // console.log(fileList[active])\n       useOpenFile(filePath)\n       document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n"
                },
                {
                    "date": 1666340860232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,11 +41,12 @@\n     }\n     if (e.code === 'Enter') {\n       console.log(fileList)\n \n-      const filePath = fileList[active].filePath\n+      const filePath = files[active].getAttribute('key')\n+      console.log(filePath)\n       // console.log(fileList[active])\n-      useOpenFile(filePath)\n+      // useOpenFile(filePath)\n       document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n   useEffect(() => {\n"
                },
                {
                    "date": 1666340916836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,9 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       console.log(fileList)\n-\n+console.log(files)\n       const filePath = files[active].getAttribute('key')\n       console.log(filePath)\n       // console.log(fileList[active])\n       // useOpenFile(filePath)\n"
                },
                {
                    "date": 1666342047781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,14 +40,14 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       console.log(fileList)\n-console.log(files)\n-      const filePath = files[active].getAttribute('key')\n-      console.log(filePath)\n+// console.log(files)\n+      // const filePath = files[active].getAttribute('key')\n+      // console.log(filePath)\n       // console.log(fileList[active])\n       // useOpenFile(filePath)\n-      document.querySelector('.search-file')?.classList.toggle('search-file-close')\n+      // document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666342081125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n interface ISearchFile {\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n+  console.log(fileList)\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n"
                },
                {
                    "date": 1666342263275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n interface ISearchFile {\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n-  console.log(fileList)\n+  console.log('xxxxxxxxxx')\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n"
                },
                {
                    "date": 1666342325624,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n interface ISearchFile {\n   fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n-  console.log('xxxxxxxxxx')\n+  console.log(fileList)\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n"
                },
                {
                    "date": 1666342816598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [])\n+  }, [fileList])\n   return (\n     <div className=\"search-file search-file-close\">\n       <div>\n         <input type=\"text\" />\n"
                },
                {
                    "date": 1666342942750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,15 +40,13 @@\n         active += 1\n       }\n     }\n     if (e.code === 'Enter') {\n-      console.log(fileList)\n-// console.log(files)\n-      // const filePath = files[active].getAttribute('key')\n+      const filePath = fileList[active].filePath\n       // console.log(filePath)\n       // console.log(fileList[active])\n-      // useOpenFile(filePath)\n-      // document.querySelector('.search-file')?.classList.toggle('search-file-close')\n+      useOpenFile(filePath)\n+      document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666343460079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,9 @@\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n   }, [fileList])\n   return (\n-    <div className=\"search-file search-file-close\">\n+    <div className=\"search-file \">\n       <div>\n         <input type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n"
                },
                {
                    "date": 1666363092244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,12 @@\n import { useEffect, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n-  fileList: IFileList\n+  fileList: IFileList,\n+  openSearchFile:boolean\n }\n-export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList,openSearchFile }) => {\n   console.log(fileList)\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n"
                },
                {
                    "date": 1666363345391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,12 @@\n import { useOpenFile } from '@renderer/common/useOpenFile'\n-import { useEffect, useState } from 'react'\n+import { useEffect } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList,\n-  openSearchFile:boolean\n }\n-export const SearchFile: React.FC<ISearchFile> = ({ fileList,openSearchFile }) => {\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n   console.log(fileList)\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n"
                },
                {
                    "date": 1666363375368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,12 +2,11 @@\n import { useEffect } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n-  fileList: IFileList,\n+  fileList: IFileList\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n-  console.log(fileList)\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n"
                },
                {
                    "date": 1666406290681,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,10 +40,8 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n-      // console.log(filePath)\n-      // console.log(fileList[active])\n       useOpenFile(filePath)\n       document.querySelector('.search-file')?.classList.toggle('search-file-close')\n     }\n   }\n"
                },
                {
                    "date": 1666407818347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,10 +3,11 @@\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n+  openFile:(filePath:string) => void\n }\n-export const SearchFile: React.FC<ISearchFile> = ({ fileList }) => {\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList,openFile }) => {\n   let active = 0\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n@@ -40,10 +41,9 @@\n       }\n     }\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n-      useOpenFile(filePath)\n-      document.querySelector('.search-file')?.classList.toggle('search-file-close')\n+      openFile(filePath)\n     }\n   }\n   useEffect(() => {\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1666409059236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,15 @@\n import { useOpenFile } from '@renderer/common/useOpenFile'\n-import { useEffect } from 'react'\n+import { useEffect, useRef } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n   openFile:(filePath:string) => void\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList,openFile }) => {\n   let active = 0\n+  const iptRef = useRef<HTMLInputElement>(null)\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n@@ -45,15 +46,16 @@\n       openFile(filePath)\n     }\n   }\n   useEffect(() => {\n+    iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n   }, [fileList])\n   return (\n     <div className=\"search-file \">\n       <div>\n-        <input type=\"text\" />\n+        <input placeholder='xx' ref={iptRef} type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n     </div>\n   )\n"
                },
                {
                    "date": 1666409194633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,10 +4,11 @@\n \n interface ISearchFile {\n   fileList: IFileList\n   openFile:(filePath:string) => void\n+  closeSearchFile:()=>void\n }\n-export const SearchFile: React.FC<ISearchFile> = ({ fileList,openFile }) => {\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList,openFile ,closeSearchFile}) => {\n   let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const files = fileList.map((file, index) => {\n     return (\n@@ -43,8 +44,9 @@\n     }\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n       openFile(filePath)\n+      closeSearchFile()\n     }\n   }\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1666501814270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,13 @@\n-import { useOpenFile } from '@renderer/common/useOpenFile'\n import { useEffect, useRef } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n-  openFile:(filePath:string) => void\n-  closeSearchFile:()=>void\n+  openFile: (filePath: string) => void\n+  closeSearchFile: () => void\n }\n-export const SearchFile: React.FC<ISearchFile> = ({ fileList,openFile ,closeSearchFile}) => {\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const files = fileList.map((file, index) => {\n     return (\n@@ -41,8 +40,19 @@\n         files[active + 1].classList.add('active')\n         active += 1\n       }\n     }\n+    const Element = files[active]\n+    const io = new IntersectionObserver((entries) => {\n+      entries.forEach((entrie) => {\n+        if (!entrie.isIntersecting) {\n+          console.log(entrie)\n+          Element.scrollIntoView()\n+          console.log(entrie)\n+        }\n+      })\n+    })\n+    io.observe(Element)\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n       openFile(filePath)\n       closeSearchFile()\n@@ -55,9 +65,9 @@\n   }, [fileList])\n   return (\n     <div className=\"search-file \">\n       <div>\n-        <input placeholder='xx' ref={iptRef} type=\"text\" />\n+        <input placeholder=\"xx\" ref={iptRef} type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n     </div>\n   )\n"
                },
                {
                    "date": 1666501881766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,10 +45,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (!entrie.isIntersecting) {\n           console.log(entrie)\n-          Element.scrollIntoView()\n-          console.log(entrie)\n+          // Element.scrollIntoView()\n         }\n       })\n     })\n     io.observe(Element)\n"
                },
                {
                    "date": 1666501943594,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n   })\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     if (e.code === 'ArrowUp') {\n-      console.log('up')\n       files[active].classList.remove('active')\n       if (!files[active - 1]) {\n         active = files.length - 1\n         files[active].classList.add('active')\n@@ -29,10 +28,8 @@\n         active -= 1\n       }\n     }\n     if (e.code === 'ArrowDown') {\n-      console.log('down')\n-      console.log(active)\n       files[active].classList.remove('active')\n       if (!files[active + 1]) {\n         active = 0\n         files[active].classList.add('active')\n@@ -41,8 +38,9 @@\n         active += 1\n       }\n     }\n     const Element = files[active]\n+    console.log(Element)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (!entrie.isIntersecting) {\n           console.log(entrie)\n"
                },
                {
                    "date": 1666501954700,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n         active += 1\n       }\n     }\n     const Element = files[active]\n-    console.log(Element)\n+    console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (!entrie.isIntersecting) {\n           console.log(entrie)\n"
                },
                {
                    "date": 1666502045573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n     const Element = files[active]\n     console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n-        if (!entrie.isIntersecting) {\n+        if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n           // Element.scrollIntoView()\n         }\n       })\n"
                },
                {
                    "date": 1666502121460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n-          // Element.scrollIntoView()\n+          Element.scrollIntoView(true)\n         }\n       })\n     })\n     io.observe(Element)\n"
                },
                {
                    "date": 1666502175486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,8 +44,9 @@\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n           Element.scrollIntoView(true)\n+          io.unobserve(Element)\n         }\n       })\n     })\n     io.observe(Element)\n"
                },
                {
                    "date": 1666502602842,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n-          Element.scrollIntoView(true)\n+          Element.scrollIntoView({block:'end'})\n           io.unobserve(Element)\n         }\n       })\n     })\n"
                },
                {
                    "date": 1666502635992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n-          Element.scrollIntoView({block:'end'})\n+          Element.scrollIntoView({block:'start'})\n           io.unobserve(Element)\n         }\n       })\n     })\n"
                },
                {
                    "date": 1666502679471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n-          Element.scrollIntoView({block:'start'})\n+          Element.scrollIntoView({block:'nearest'})\n           io.unobserve(Element)\n         }\n       })\n     })\n"
                },
                {
                    "date": 1666502702096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n-          Element.scrollIntoView({block:'nearest'})\n+          Element.scrollIntoView({block:'center'})\n           io.unobserve(Element)\n         }\n       })\n     })\n"
                },
                {
                    "date": 1666502744791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.1) {\n           console.log(entrie)\n-          Element.scrollIntoView({block:'center'})\n+          Element.scrollIntoView({block:'start'})\n           io.unobserve(Element)\n         }\n       })\n     })\n"
                },
                {
                    "date": 1666502830302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,11 +41,11 @@\n     const Element = files[active]\n     console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n-        if (entrie.intersectionRatio < 0.1) {\n+        if (entrie.intersectionRatio < 0.5) {\n           console.log(entrie)\n-          Element.scrollIntoView({block:'start'})\n+          Element.scrollIntoView(false)\n           io.unobserve(Element)\n         }\n       })\n     })\n"
                },
                {
                    "date": 1666503042653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,10 +44,10 @@\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n           console.log(entrie)\n           Element.scrollIntoView(false)\n-          io.unobserve(Element)\n         }\n+        io.unobserve(Element)\n       })\n     })\n     io.observe(Element)\n     if (e.code === 'Enter') {\n"
                },
                {
                    "date": 1666503228031,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,11 @@\n     )\n   })\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n-    if (e.code === 'ArrowUp') {\n+    const ARROW_DOWN = 'ArrowDown'\n+    const ARROW_UP = 'ArrowUp'\n+    if (e.code === ARROW_UP) {\n       files[active].classList.remove('active')\n       if (!files[active - 1]) {\n         active = files.length - 1\n         files[active].classList.add('active')\n@@ -27,9 +29,9 @@\n         files[active - 1].classList.add('active')\n         active -= 1\n       }\n     }\n-    if (e.code === 'ArrowDown') {\n+    if (e.code === ARROW_DOWN) {\n       files[active].classList.remove('active')\n       if (!files[active + 1]) {\n         active = 0\n         files[active].classList.add('active')\n@@ -42,11 +44,12 @@\n     console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n-          console.log(entrie)\n-          Element.scrollIntoView(false)\n+          if(e.code===ARROW_DOWN) Element.scrollIntoView(false)\n+          else Element.scrollIntoView(true)\n         }\n+        // 不论如何都需要移除当前的观察项，保证只有一项\n         io.unobserve(Element)\n       })\n     })\n     io.observe(Element)\n"
                },
                {
                    "date": 1666503246037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n     console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n-          if(e.code===ARROW_DOWN) Element.scrollIntoView(false)\n+          if (e.code === ARROW_DOWN) Element.scrollIntoView(false)\n           else Element.scrollIntoView(true)\n         }\n         // 不论如何都需要移除当前的观察项，保证只有一项\n         io.unobserve(Element)\n"
                },
                {
                    "date": 1667143526433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,27 @@\n-import { useEffect, useRef } from 'react'\n+import { useEffect, useRef, useState } from 'react'\n import { IFileList } from 'src/preload/index.d'\n \n interface ISearchFile {\n   fileList: IFileList\n   openFile: (filePath: string) => void\n   closeSearchFile: () => void\n }\n-export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n-  let active = 0\n-  const iptRef = useRef<HTMLInputElement>(null)\n+const mapFiles = (fileList: IFileList) => {\n   const files = fileList.map((file, index) => {\n     return (\n       <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n+  return files\n+}\n+export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n+  const [files, setFiles] = useState(mapFiles(fileList))\n+\n+  let active = 0\n+  const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n@@ -63,12 +68,20 @@\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n   }, [fileList])\n+  const updateFiles = () => {\n+    const searchStr = iptRef.current?.value || ''\n+    const newFileList = fileList.filter((file) => {\n+      if (file.fileName.includes(searchStr)) return true\n+      else return file\n+    })\n+    setFiles(newFileList)\n+  }\n   return (\n     <div className=\"search-file \">\n       <div>\n-        <input placeholder=\"xx\" ref={iptRef} type=\"text\" />\n+        <input placeholder=\"xx\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n     </div>\n   )\n"
                },
                {
                    "date": 1667143565480,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,9 +74,9 @@\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.includes(searchStr)) return true\n       else return file\n     })\n-    setFiles(newFileList)\n+    setFiles(mapFiles(newFileList))\n   }\n   return (\n     <div className=\"search-file \">\n       <div>\n"
                },
                {
                    "date": 1667143583551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,8 +69,9 @@\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n   }, [fileList])\n   const updateFiles = () => {\n+    console.log('change')\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.includes(searchStr)) return true\n       else return file\n"
                },
                {
                    "date": 1667143632266,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,10 +69,10 @@\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n   }, [fileList])\n   const updateFiles = () => {\n-    console.log('change')\n     const searchStr = iptRef.current?.value || ''\n+    console.log(searchStr)\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.includes(searchStr)) return true\n       else return file\n     })\n"
                },
                {
                    "date": 1667143684509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,13 +70,13 @@\n     return () => document.removeEventListener('keydown', hanleSelect)\n   }, [fileList])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n-    console.log(searchStr)\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.includes(searchStr)) return true\n       else return file\n     })\n+    console.log(newFileList)\n     setFiles(mapFiles(newFileList))\n   }\n   return (\n     <div className=\"search-file \">\n"
                },
                {
                    "date": 1667143715769,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,9 +72,9 @@\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.includes(searchStr)) return true\n-      else return file\n+      else return false\n     })\n     console.log(newFileList)\n     setFiles(mapFiles(newFileList))\n   }\n"
                },
                {
                    "date": 1667143772198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,9 +71,9 @@\n   }, [fileList])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n-      if (file.fileName.includes(searchStr)) return true\n+      if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n       else return false\n     })\n     console.log(newFileList)\n     setFiles(mapFiles(newFileList))\n"
                },
                {
                    "date": 1667143901846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,10 +59,11 @@\n     })\n     io.observe(Element)\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n-      openFile(filePath)\n-      closeSearchFile()\n+      console.log(filePath)\n+      // openFile(filePath)\n+      // closeSearchFile()\n     }\n   }\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1667143925566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,8 @@\n         active += 1\n       }\n     }\n     const Element = files[active]\n-    console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n           if (e.code === ARROW_DOWN) Element.scrollIntoView(false)\n"
                },
                {
                    "date": 1667143937800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,9 @@\n         active += 1\n       }\n     }\n     const Element = files[active]\n+    console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n           if (e.code === ARROW_DOWN) Element.scrollIntoView(false)\n"
                },
                {
                    "date": 1667144030937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,8 +36,9 @@\n       }\n     }\n     if (e.code === ARROW_DOWN) {\n       files[active].classList.remove('active')\n+      console.log(active)\n       if (!files[active + 1]) {\n         active = 0\n         files[active].classList.add('active')\n       } else {\n"
                },
                {
                    "date": 1667144228671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,11 +6,11 @@\n   openFile: (filePath: string) => void\n   closeSearchFile: () => void\n }\n const mapFiles = (fileList: IFileList) => {\n-  const files = fileList.map((file, index) => {\n+  const files = fileList.map((file) => {\n     return (\n-      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n+      <li key={file.filePath} >\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n@@ -22,8 +22,9 @@\n   let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n+    files[0].classList.add('active')\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n       files[active].classList.remove('active')\n"
                },
                {
                    "date": 1667144299751,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,8 @@\n   return files\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [files, setFiles] = useState(mapFiles(fileList))\n-\n   let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n"
                },
                {
                    "date": 1667144344485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,19 +6,20 @@\n   openFile: (filePath: string) => void\n   closeSearchFile: () => void\n }\n const mapFiles = (fileList: IFileList) => {\n-  const files = fileList.map((file) => {\n+  const files = fileList.map((file, index) => {\n     return (\n-      <li key={file.filePath} >\n+      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n   return files\n }\n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [files, setFiles] = useState(mapFiles(fileList))\n+\n   let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n"
                },
                {
                    "date": 1667144354589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,8 @@\n   let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n-    files[0].classList.add('active')\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n       files[active].classList.remove('active')\n"
                },
                {
                    "date": 1667145071942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,12 +15,13 @@\n     )\n   })\n   return files\n }\n+let active = 0\n+\n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [files, setFiles] = useState(mapFiles(fileList))\n \n-  let active = 0\n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     const ARROW_DOWN = 'ArrowDown'\n"
                },
                {
                    "date": 1667192670978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,9 +70,9 @@\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [fileList])\n+  }, [fileList,files])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n"
                },
                {
                    "date": 1667192876803,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n }\n const mapFiles = (fileList: IFileList) => {\n   const files = fileList.map((file, index) => {\n     return (\n-      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n+      <li key={file.filePath} className={index === 0 ? '' : ''}>\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n"
                },
                {
                    "date": 1667192914016,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n }\n const mapFiles = (fileList: IFileList) => {\n   const files = fileList.map((file, index) => {\n     return (\n-      <li key={file.filePath} className={index === 0 ? '' : ''}>\n+      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n"
                },
                {
                    "date": 1667193149571,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,12 +15,12 @@\n     )\n   })\n   return files\n }\n-let active = 0\n \n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [files, setFiles] = useState(mapFiles(fileList))\n+  let active = 0\n \n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n"
                },
                {
                    "date": 1667193562681,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,62 +5,54 @@\n   fileList: IFileList\n   openFile: (filePath: string) => void\n   closeSearchFile: () => void\n }\n-const mapFiles = (fileList: IFileList) => {\n-  const files = fileList.map((file, index) => {\n-    return (\n-      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n-        <span>{file.fileName}</span>\n-      </li>\n-    )\n-  })\n-  return files\n-}\n \n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n+  const [active, setActive] = useState(0)\n+  const mapFiles = (fileList: IFileList) => {\n+    const files = fileList.map((file, index) => {\n+      return (\n+        <li key={file.filePath} className={index === active ? 'active' : ''}>\n+          <span>{file.fileName}</span>\n+        </li>\n+      )\n+    })\n+    return files\n+  }\n   const [files, setFiles] = useState(mapFiles(fileList))\n-  let active = 0\n \n   const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n-    const files = document.querySelectorAll<HTMLElement>('.search-file ul li')\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n-      files[active].classList.remove('active')\n       if (!files[active - 1]) {\n-        active = files.length - 1\n-        files[active].classList.add('active')\n+        setActive(files.length-1)\n       } else {\n-        files[active - 1].classList.add('active')\n-        active -= 1\n+        setActive(active+1)\n       }\n     }\n     if (e.code === ARROW_DOWN) {\n-      files[active].classList.remove('active')\n-      console.log(active)\n       if (!files[active + 1]) {\n-        active = 0\n-        files[active].classList.add('active')\n+        setActive(0)\n       } else {\n-        files[active + 1].classList.add('active')\n-        active += 1\n+        setActive(active+1)\n       }\n     }\n-    const Element = files[active]\n-    console.log(Element.innerText)\n-    const io = new IntersectionObserver((entries) => {\n-      entries.forEach((entrie) => {\n-        if (entrie.intersectionRatio < 0.5) {\n-          if (e.code === ARROW_DOWN) Element.scrollIntoView(false)\n-          else Element.scrollIntoView(true)\n-        }\n-        // 不论如何都需要移除当前的观察项，保证只有一项\n-        io.unobserve(Element)\n-      })\n-    })\n-    io.observe(Element)\n+    // const Element = files[active]\n+    // console.log(Element.innerText)\n+    // const io = new IntersectionObserver((entries) => {\n+    //   entries.forEach((entrie) => {\n+    //     if (entrie.intersectionRatio < 0.5) {\n+    //       if (e.code === ARROW_DOWN) Element.scrollIntoView(false)\n+    //       else Element.scrollIntoView(true)\n+    //     }\n+    //     // 不论如何都需要移除当前的观察项，保证只有一项\n+    //     io.unobserve(Element)\n+    //   })\n+    // })\n+    // io.observe(Element)\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n       console.log(filePath)\n       // openFile(filePath)\n@@ -70,9 +62,9 @@\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [fileList,files])\n+  }, [fileList])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n"
                },
                {
                    "date": 1667193836192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n   const hanleSelect = (e: KeyboardEvent) => {\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n+      console.log('arrow-up')\n       if (!files[active - 1]) {\n         setActive(files.length-1)\n       } else {\n         setActive(active+1)\n"
                },
                {
                    "date": 1667195989192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -76,8 +76,11 @@\n   }\n   return (\n     <div className=\"search-file \">\n       <div>\n+        <button onClick={()=>{\n+          setActive(active + 2)\n+        }}>this is active: {active}</button>\n         <input placeholder=\"xx\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n     </div>\n"
                },
                {
                    "date": 1667196053635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n       console.log('arrow-up')\n+      console.log(active)\n       if (!files[active - 1]) {\n         setActive(files.length-1)\n       } else {\n         setActive(active+1)\n"
                },
                {
                    "date": 1667196097116,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,9 @@\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n       console.log('arrow-up')\n       console.log(active)\n+      setActive(active+2)\n       if (!files[active - 1]) {\n         setActive(files.length-1)\n       } else {\n         setActive(active+1)\n"
                },
                {
                    "date": 1667196111090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,11 +29,11 @@\n       console.log('arrow-up')\n       console.log(active)\n       setActive(active+2)\n       if (!files[active - 1]) {\n-        setActive(files.length-1)\n+        // setActive(files.length-1)\n       } else {\n-        setActive(active+1)\n+        // setActive(active+1)\n       }\n     }\n     if (e.code === ARROW_DOWN) {\n       if (!files[active + 1]) {\n"
                },
                {
                    "date": 1667196190917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,18 +31,18 @@\n       setActive(active+2)\n       if (!files[active - 1]) {\n         // setActive(files.length-1)\n       } else {\n-        // setActive(active+1)\n+        // setActive(active-1)\n       }\n     }\n-    if (e.code === ARROW_DOWN) {\n-      if (!files[active + 1]) {\n-        setActive(0)\n-      } else {\n-        setActive(active+1)\n-      }\n-    }\n+    // if (e.code === ARROW_DOWN) {\n+    //   if (!files[active + 1]) {\n+    //     setActive(0)\n+    //   } else {\n+    //     setActive(active+1)\n+    //   }\n+    // }\n     // const Element = files[active]\n     // console.log(Element.innerText)\n     // const io = new IntersectionObserver((entries) => {\n     //   entries.forEach((entrie) => {\n"
                },
                {
                    "date": 1667197004135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [fileList])\n+  }, [fileList,active])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n"
                },
                {
                    "date": 1667197462911,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,41 +8,38 @@\n }\n \n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [active, setActive] = useState(0)\n+  const iptRef = useRef<HTMLInputElement>(null)\n   const mapFiles = (fileList: IFileList) => {\n     const files = fileList.map((file, index) => {\n       return (\n-        <li key={file.filePath} className={index === active ? 'active' : ''}>\n+        <li key={file.filePath}>\n           <span>{file.fileName}</span>\n         </li>\n       )\n     })\n     return files\n   }\n   const [files, setFiles] = useState(mapFiles(fileList))\n \n-  const iptRef = useRef<HTMLInputElement>(null)\n   const hanleSelect = (e: KeyboardEvent) => {\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n-      console.log('arrow-up')\n-      console.log(active)\n-      setActive(active+2)\n       if (!files[active - 1]) {\n-        // setActive(files.length-1)\n+        setActive(files.length - 1)\n       } else {\n-        // setActive(active-1)\n+        setActive(active - 1)\n       }\n     }\n-    // if (e.code === ARROW_DOWN) {\n-    //   if (!files[active + 1]) {\n-    //     setActive(0)\n-    //   } else {\n-    //     setActive(active+1)\n-    //   }\n-    // }\n+    if (e.code === ARROW_DOWN) {\n+      if (!files[active + 1]) {\n+        setActive(0)\n+      } else {\n+        setActive(active + 1)\n+      }\n+    }\n     // const Element = files[active]\n     // console.log(Element.innerText)\n     // const io = new IntersectionObserver((entries) => {\n     //   entries.forEach((entrie) => {\n@@ -65,9 +62,9 @@\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [fileList,active])\n+  }, [fileList, active])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n@@ -78,11 +75,15 @@\n   }\n   return (\n     <div className=\"search-file \">\n       <div>\n-        <button onClick={()=>{\n-          setActive(active + 2)\n-        }}>this is active: {active}</button>\n+        <button\n+          onClick={() => {\n+            setActive(active + 2)\n+          }}\n+        >\n+          this is active: {active}\n+        </button>\n         <input placeholder=\"xx\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n       </div>\n       <ul>{files}</ul>\n     </div>\n"
                },
                {
                    "date": 1667197702813,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n   const iptRef = useRef<HTMLInputElement>(null)\n   const mapFiles = (fileList: IFileList) => {\n     const files = fileList.map((file, index) => {\n       return (\n-        <li key={file.filePath}>\n+        <li key={file.filePath} className={index === active ? 'active' : ''}>\n           <span>{file.fileName}</span>\n         </li>\n       )\n     })\n"
                },
                {
                    "date": 1667199022821,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n \n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [active, setActive] = useState(0)\n   const iptRef = useRef<HTMLInputElement>(null)\n+  const filesContainer = useRef<HTMLUListElement>(null)\n   const mapFiles = (fileList: IFileList) => {\n     const files = fileList.map((file, index) => {\n       return (\n         <li key={file.filePath} className={index === active ? 'active' : ''}>\n@@ -20,9 +21,8 @@\n     })\n     return files\n   }\n   const [files, setFiles] = useState(mapFiles(fileList))\n-\n   const hanleSelect = (e: KeyboardEvent) => {\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n     if (e.code === ARROW_UP) {\n@@ -38,21 +38,24 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    // const Element = files[active]\n+\n+    const Element = filesContainer.current?.children[active]\n+    Element?.classList.add('active')\n     // console.log(Element.innerText)\n-    // const io = new IntersectionObserver((entries) => {\n-    //   entries.forEach((entrie) => {\n-    //     if (entrie.intersectionRatio < 0.5) {\n-    //       if (e.code === ARROW_DOWN) Element.scrollIntoView(false)\n-    //       else Element.scrollIntoView(true)\n-    //     }\n-    //     // 不论如何都需要移除当前的观察项，保证只有一项\n-    //     io.unobserve(Element)\n-    //   })\n-    // })\n-    // io.observe(Element)\n+    const io = new IntersectionObserver((entries) => {\n+      entries.forEach((entrie) => {\n+        if (entrie.intersectionRatio < 0.5) {\n+          if (e.code === ARROW_DOWN) Element?.scrollIntoView(false)\n+          else Element?.scrollIntoView(true)\n+        }\n+        // 不论如何都需要移除当前的观察项，保证只有一项\n+        Element && io.unobserve(Element)\n+      })\n+    })\n+    Element && io.observe(Element)\n+\n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n       console.log(filePath)\n       // openFile(filePath)\n@@ -69,9 +72,8 @@\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n       else return false\n     })\n-    console.log(newFileList)\n     setFiles(mapFiles(newFileList))\n   }\n   return (\n     <div className=\"search-file \">\n@@ -84,8 +86,8 @@\n           this is active: {active}\n         </button>\n         <input placeholder=\"xx\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n       </div>\n-      <ul>{files}</ul>\n+      <ul ref={filesContainer}>{files}</ul>\n     </div>\n   )\n }\n"
                },
                {
                    "date": 1667199143221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,12 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-\n+    const files = filesContainer.current?.children\n+    files && [...files].forEach(file=>{\n+      file.classList.remove('active')\n+    })\n     const Element = filesContainer.current?.children[active]\n     Element?.classList.add('active')\n     // console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n"
                },
                {
                    "date": 1667199192423,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,12 +38,8 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    const files = filesContainer.current?.children\n-    files && [...files].forEach(file=>{\n-      file.classList.remove('active')\n-    })\n     const Element = filesContainer.current?.children[active]\n     Element?.classList.add('active')\n     // console.log(Element.innerText)\n     const io = new IntersectionObserver((entries) => {\n"
                },
                {
                    "date": 1667200835899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,9 @@\n   const [files, setFiles] = useState(mapFiles(fileList))\n   const hanleSelect = (e: KeyboardEvent) => {\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n+    let beforeActive = active\n     if (e.code === ARROW_UP) {\n       if (!files[active - 1]) {\n         setActive(files.length - 1)\n       } else {\n@@ -39,21 +40,22 @@\n         setActive(active + 1)\n       }\n     }\n     const Element = filesContainer.current?.children[active]\n+    filesContainer.current?.children[beforeActive]\n     Element?.classList.add('active')\n-    // console.log(Element.innerText)\n-    const io = new IntersectionObserver((entries) => {\n-      entries.forEach((entrie) => {\n-        if (entrie.intersectionRatio < 0.5) {\n-          if (e.code === ARROW_DOWN) Element?.scrollIntoView(false)\n-          else Element?.scrollIntoView(true)\n-        }\n-        // 不论如何都需要移除当前的观察项，保证只有一项\n-        Element && io.unobserve(Element)\n-      })\n-    })\n-    Element && io.observe(Element)\n+    // // console.log(Element.innerText)\n+    // const io = new IntersectionObserver((entries) => {\n+    //   entries.forEach((entrie) => {\n+    //     if (entrie.intersectionRatio < 0.5) {\n+    //       if (e.code === ARROW_DOWN) Element?.scrollIntoView(false)\n+    //       else Element?.scrollIntoView(true)\n+    //     }\n+    //     // 不论如何都需要移除当前的观察项，保证只有一项\n+    //     Element && io.unobserve(Element)\n+    //   })\n+    // })\n+    // Element && io.observe(Element)\n \n     if (e.code === 'Enter') {\n       const filePath = fileList[active].filePath\n       console.log(filePath)\n"
                },
                {
                    "date": 1667200841953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,11 +39,11 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    const Element = filesContainer.current?.children[active]\n-    filesContainer.current?.children[beforeActive]\n-    Element?.classList.add('active')\n+    // const Element = filesContainer.current?.children[active]\n+    // filesContainer.current?.children[beforeActive]\n+    // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n     // const io = new IntersectionObserver((entries) => {\n     //   entries.forEach((entrie) => {\n     //     if (entrie.intersectionRatio < 0.5) {\n"
                },
                {
                    "date": 1667201043415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n   const [files, setFiles] = useState(mapFiles(fileList))\n   const hanleSelect = (e: KeyboardEvent) => {\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n-    let beforeActive = active\n+    console.log(active)\n     if (e.code === ARROW_UP) {\n       if (!files[active - 1]) {\n         setActive(files.length - 1)\n       } else {\n@@ -39,8 +39,9 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n+    console.log(active)\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n@@ -56,10 +57,10 @@\n     // })\n     // Element && io.observe(Element)\n \n     if (e.code === 'Enter') {\n-      const filePath = fileList[active].filePath\n-      console.log(filePath)\n+      // const filePath = fileList[active].filePath\n+      // console.log(filePath)\n       // openFile(filePath)\n       // closeSearchFile()\n     }\n   }\n"
                },
                {
                    "date": 1667201139511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n   const filesContainer = useRef<HTMLUListElement>(null)\n   const mapFiles = (fileList: IFileList) => {\n     const files = fileList.map((file, index) => {\n       return (\n-        <li key={file.filePath} className={index === active ? 'active' : ''}>\n+        <li key={file.filePath}>\n           <span>{file.fileName}</span>\n         </li>\n       )\n     })\n"
                },
                {
                    "date": 1667201292402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,8 +40,15 @@\n         setActive(active + 1)\n       }\n     }\n     console.log(active)\n+    const lis = filesContainer.current?.children;\n+    lis && [...lis].forEach((li,index)=>{\n+      li.classList.remove('active')\n+      if(index === active) {\n+        li.classList.add('active')\n+      }\n+    })\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n"
                },
                {
                    "date": 1667203567435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,28 +5,27 @@\n   fileList: IFileList\n   openFile: (filePath: string) => void\n   closeSearchFile: () => void\n }\n-\n+const mapFiles = (fileList: IFileList) => {\n+  const files = fileList.map((file, index) => {\n+    return (\n+      <li key={file.filePath}>\n+        <span>{file.fileName}</span>\n+      </li>\n+    )\n+  })\n+  return files\n+}\n export const SearchFile: React.FC<ISearchFile> = ({ fileList, openFile, closeSearchFile }) => {\n   const [active, setActive] = useState(0)\n   const iptRef = useRef<HTMLInputElement>(null)\n   const filesContainer = useRef<HTMLUListElement>(null)\n-  const mapFiles = (fileList: IFileList) => {\n-    const files = fileList.map((file, index) => {\n-      return (\n-        <li key={file.filePath}>\n-          <span>{file.fileName}</span>\n-        </li>\n-      )\n-    })\n-    return files\n-  }\n+\n   const [files, setFiles] = useState(mapFiles(fileList))\n   const hanleSelect = (e: KeyboardEvent) => {\n     const ARROW_DOWN = 'ArrowDown'\n     const ARROW_UP = 'ArrowUp'\n-    console.log(active)\n     if (e.code === ARROW_UP) {\n       if (!files[active - 1]) {\n         setActive(files.length - 1)\n       } else {\n@@ -39,16 +38,13 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    console.log(active)\n     const lis = filesContainer.current?.children;\n     lis && [...lis].forEach((li,index)=>{\n       li.classList.remove('active')\n-      if(index === active) {\n-        li.classList.add('active')\n-      }\n     })\n+    lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n"
                },
                {
                    "date": 1667203620508,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n }\n const mapFiles = (fileList: IFileList) => {\n   const files = fileList.map((file, index) => {\n     return (\n-      <li key={file.filePath}>\n+      <li key={file.filePath} className={index === 0 ? 'active' : ''}>\n         <span>{file.fileName}</span>\n       </li>\n     )\n   })\n@@ -38,12 +38,13 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    const lis = filesContainer.current?.children;\n-    lis && [...lis].forEach((li,index)=>{\n-      li.classList.remove('active')\n-    })\n+    const lis = filesContainer.current?.children\n+    lis &&\n+      [...lis].forEach((li, index) => {\n+        li.classList.remove('active')\n+      })\n     lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n"
                },
                {
                    "date": 1667204273030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,15 +83,9 @@\n   }\n   return (\n     <div className=\"search-file \">\n       <div>\n-        <button\n-          onClick={() => {\n-            setActive(active + 2)\n-          }}\n-        >\n-          this is active: {active}\n-        </button>\n+        <span>{active}</span>\n         <input placeholder=\"xx\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n       </div>\n       <ul ref={filesContainer}>{files}</ul>\n     </div>\n"
                },
                {
                    "date": 1667204278515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,14 +38,14 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    const lis = filesContainer.current?.children\n-    lis &&\n-      [...lis].forEach((li, index) => {\n-        li.classList.remove('active')\n-      })\n-    lis?.[active].classList.add('active')\n+    // const lis = filesContainer.current?.children\n+    // lis &&\n+    //   [...lis].forEach((li, index) => {\n+    //     li.classList.remove('active')\n+    //   })\n+    // lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n"
                },
                {
                    "date": 1667204328353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,13 +38,13 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    // const lis = filesContainer.current?.children\n-    // lis &&\n-    //   [...lis].forEach((li, index) => {\n-    //     li.classList.remove('active')\n-    //   })\n+    const lis = filesContainer.current?.children\n+    lis &&\n+      [...lis].forEach((li, index) => {\n+        li.classList.remove('active')\n+      })\n     // lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n"
                },
                {
                    "date": 1667204336297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n     lis &&\n       [...lis].forEach((li, index) => {\n         li.classList.remove('active')\n       })\n-    // lis?.[active].classList.add('active')\n+    lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n"
                },
                {
                    "date": 1667204356584,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,14 +38,14 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    const lis = filesContainer.current?.children\n-    lis &&\n-      [...lis].forEach((li, index) => {\n-        li.classList.remove('active')\n-      })\n-    lis?.[active].classList.add('active')\n+    // const lis = filesContainer.current?.children\n+    // lis &&\n+    //   [...lis].forEach((li, index) => {\n+    //     li.classList.remove('active')\n+    //   })\n+    // lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n"
                },
                {
                    "date": 1667204453433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,16 @@\n       // openFile(filePath)\n       // closeSearchFile()\n     }\n   }\n+  useEffect(()=>{\n+    const lis = filesContainer.current?.children\n+    lis &&\n+      [...lis].forEach((li, index) => {\n+        li.classList.remove('active')\n+      })\n+    lis?.[active].classList.add('active')\n+  },[active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667204575846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,14 +74,14 @@\n       [...lis].forEach((li, index) => {\n         li.classList.remove('active')\n       })\n     lis?.[active].classList.add('active')\n-  },[active])\n+  },[active,files])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [fileList, active])\n+  }, [active])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n"
                },
                {
                    "date": 1667204653633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,13 +69,14 @@\n     }\n   }\n   useEffect(()=>{\n     const lis = filesContainer.current?.children\n-    lis &&\n-      [...lis].forEach((li, index) => {\n-        li.classList.remove('active')\n-      })\n-    lis?.[active].classList.add('active')\n+    console.log(lis)\n+    // lis &&\n+    //   [...lis].forEach((li, index) => {\n+    //     li.classList.remove('active')\n+    //   })\n+    // lis?.[active].classList.add('active')\n   },[active,files])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667204694764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,8 +88,9 @@\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n       else return false\n     })\n     setFiles(mapFiles(newFileList))\n+    setActive(0)\n   }\n   return (\n     <div className=\"search-file \">\n       <div>\n"
                },
                {
                    "date": 1667204760602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,14 +70,14 @@\n   }\n   useEffect(()=>{\n     const lis = filesContainer.current?.children\n     console.log(lis)\n-    // lis &&\n-    //   [...lis].forEach((li, index) => {\n-    //     li.classList.remove('active')\n-    //   })\n-    // lis?.[active].classList.add('active')\n-  },[active,files])\n+    lis &&\n+      [...lis].forEach((li, index) => {\n+        li.classList.remove('active')\n+      })\n+    lis?.[active].classList.add('active')\n+  },[active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667205234427,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,46 +38,40 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    // const lis = filesContainer.current?.children\n-    // lis &&\n-    //   [...lis].forEach((li, index) => {\n-    //     li.classList.remove('active')\n-    //   })\n     // lis?.[active].classList.add('active')\n     // const Element = filesContainer.current?.children[active]\n     // filesContainer.current?.children[beforeActive]\n     // Element?.classList.add('active')\n     // // console.log(Element.innerText)\n-    // const io = new IntersectionObserver((entries) => {\n-    //   entries.forEach((entrie) => {\n-    //     if (entrie.intersectionRatio < 0.5) {\n-    //       if (e.code === ARROW_DOWN) Element?.scrollIntoView(false)\n-    //       else Element?.scrollIntoView(true)\n-    //     }\n-    //     // 不论如何都需要移除当前的观察项，保证只有一项\n-    //     Element && io.unobserve(Element)\n-    //   })\n-    // })\n-    // Element && io.observe(Element)\n \n     if (e.code === 'Enter') {\n       // const filePath = fileList[active].filePath\n       // console.log(filePath)\n       // openFile(filePath)\n       // closeSearchFile()\n     }\n   }\n-  useEffect(()=>{\n-    const lis = filesContainer.current?.children\n-    console.log(lis)\n-    lis &&\n-      [...lis].forEach((li, index) => {\n-        li.classList.remove('active')\n+  useEffect(() => {\n+    const lis = filesContainer.current?.children || []\n+    ;[...lis].forEach((li, index) => {\n+      li.classList.remove('active')\n+    })\n+    const target = lis[active]\n+    target.classList.add('active')\n+    const io = new IntersectionObserver((entries) => {\n+      entries.forEach((entrie) => {\n+        if (entrie.intersectionRatio < 0.5) {\n+          if (active > 5) target?.scrollIntoView(false)\n+          else target?.scrollIntoView(true)\n+        }\n+        // 不论如何都需要移除当前的观察项，保证只有一项\n+        Element && io.unobserve(target)\n       })\n-    lis?.[active].classList.add('active')\n-  },[active])\n+    })\n+    Element && io.observe(target)\n+  }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667205293669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,12 +65,12 @@\n           if (active > 5) target?.scrollIntoView(false)\n           else target?.scrollIntoView(true)\n         }\n         // 不论如何都需要移除当前的观察项，保证只有一项\n-        Element && io.unobserve(target)\n+        io.unobserve(target)\n       })\n     })\n-    Element && io.observe(target)\n+    io.observe(target)\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667207566261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,14 +38,8 @@\n       } else {\n         setActive(active + 1)\n       }\n     }\n-    // lis?.[active].classList.add('active')\n-    // const Element = filesContainer.current?.children[active]\n-    // filesContainer.current?.children[beforeActive]\n-    // Element?.classList.add('active')\n-    // // console.log(Element.innerText)\n-\n     if (e.code === 'Enter') {\n       // const filePath = fileList[active].filePath\n       // console.log(filePath)\n       // openFile(filePath)\n@@ -61,9 +55,9 @@\n     target.classList.add('active')\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n-          if (active > 5) target?.scrollIntoView(false)\n+          if (active > 8) target?.scrollIntoView(false)\n           else target?.scrollIntoView(true)\n         }\n         // 不论如何都需要移除当前的观察项，保证只有一项\n         io.unobserve(target)\n@@ -88,9 +82,9 @@\n   return (\n     <div className=\"search-file \">\n       <div>\n         <span>{active}</span>\n-        <input placeholder=\"xx\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n+        <input placeholder=\"\" onChange={updateFiles} ref={iptRef} type=\"text\" />\n       </div>\n       <ul ref={filesContainer}>{files}</ul>\n     </div>\n   )\n"
                },
                {
                    "date": 1667207666087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,10 @@\n         setActive(active + 1)\n       }\n     }\n     if (e.code === 'Enter') {\n-      // const filePath = fileList[active].filePath\n+      const filePath = files[active]\n+      console.log(filePath)\n       // console.log(filePath)\n       // openFile(filePath)\n       // closeSearchFile()\n     }\n"
                },
                {
                    "date": 1667207995864,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,11 +39,11 @@\n         setActive(active + 1)\n       }\n     }\n     if (e.code === 'Enter') {\n-      const filePath = files[active]\n-      console.log(filePath)\n+      // const filePath = files[active]\n       // console.log(filePath)\n+      // console.log(filePath)\n       // openFile(filePath)\n       // closeSearchFile()\n     }\n   }\n"
                },
                {
                    "date": 1667208007501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,9 +52,10 @@\n     ;[...lis].forEach((li, index) => {\n       li.classList.remove('active')\n     })\n     const target = lis[active]\n-    target.classList.add('active')\n+    console.log(target)\n+    // target.classList.add('active')\n     const io = new IntersectionObserver((entries) => {\n       entries.forEach((entrie) => {\n         if (entrie.intersectionRatio < 0.5) {\n           if (active > 8) target?.scrollIntoView(false)\n"
                },
                {
                    "date": 1667208037955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,20 +53,20 @@\n       li.classList.remove('active')\n     })\n     const target = lis[active]\n     console.log(target)\n-    // target.classList.add('active')\n-    const io = new IntersectionObserver((entries) => {\n-      entries.forEach((entrie) => {\n-        if (entrie.intersectionRatio < 0.5) {\n-          if (active > 8) target?.scrollIntoView(false)\n-          else target?.scrollIntoView(true)\n-        }\n-        // 不论如何都需要移除当前的观察项，保证只有一项\n-        io.unobserve(target)\n-      })\n-    })\n-    io.observe(target)\n+    target.classList.add('active')\n+    // const io = new IntersectionObserver((entries) => {\n+    //   entries.forEach((entrie) => {\n+    //     if (entrie.intersectionRatio < 0.5) {\n+    //       if (active > 8) target?.scrollIntoView(false)\n+    //       else target?.scrollIntoView(true)\n+    //     }\n+    //     // 不论如何都需要移除当前的观察项，保证只有一项\n+    //     io.unobserve(target)\n+    //   })\n+    // })\n+    // io.observe(target)\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667208094645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,20 +53,23 @@\n       li.classList.remove('active')\n     })\n     const target = lis[active]\n     console.log(target)\n-    target.classList.add('active')\n-    // const io = new IntersectionObserver((entries) => {\n-    //   entries.forEach((entrie) => {\n-    //     if (entrie.intersectionRatio < 0.5) {\n-    //       if (active > 8) target?.scrollIntoView(false)\n-    //       else target?.scrollIntoView(true)\n-    //     }\n-    //     // 不论如何都需要移除当前的观察项，保证只有一项\n-    //     io.unobserve(target)\n-    //   })\n-    // })\n-    // io.observe(target)\n+    target && target.classList.add('active')\n+    if(target) {\n+      const io = new IntersectionObserver((entries) => {\n+        entries.forEach((entrie) => {\n+          if (entrie.intersectionRatio < 0.5) {\n+            if (active > 8) target?.scrollIntoView(false)\n+            else target?.scrollIntoView(true)\n+          }\n+          // 不论如何都需要移除当前的观察项，保证只有一项\n+          io.unobserve(target)\n+        })\n+      })\n+      io.observe(target)\n+    }\n+\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n"
                },
                {
                    "date": 1667208145204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,11 +39,11 @@\n         setActive(active + 1)\n       }\n     }\n     if (e.code === 'Enter') {\n-      // const filePath = files[active]\n+      const filePath = files[active]\n+      console.log(filePath)\n       // console.log(filePath)\n-      // console.log(filePath)\n       // openFile(filePath)\n       // closeSearchFile()\n     }\n   }\n"
                },
                {
                    "date": 1667208193499,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,13 +39,11 @@\n         setActive(active + 1)\n       }\n     }\n     if (e.code === 'Enter') {\n-      const filePath = files[active]\n-      console.log(filePath)\n-      // console.log(filePath)\n-      // openFile(filePath)\n-      // closeSearchFile()\n+      const filePath = files[active]?.key\n+      openFile(filePath)\n+      closeSearchFile()\n     }\n   }\n   useEffect(() => {\n     const lis = filesContainer.current?.children || []\n"
                },
                {
                    "date": 1667208225200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,10 +39,10 @@\n         setActive(active + 1)\n       }\n     }\n     if (e.code === 'Enter') {\n-      const filePath = files[active]?.key\n-      openFile(filePath)\n+      const filePath = files[active]?.key as string\n+      filePath && openFile(filePath)\n       closeSearchFile()\n     }\n   }\n   useEffect(() => {\n"
                },
                {
                    "date": 1667208270135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,8 @@\n     ;[...lis].forEach((li, index) => {\n       li.classList.remove('active')\n     })\n     const target = lis[active]\n-    console.log(target)\n     target && target.classList.add('active')\n     if(target) {\n       const io = new IntersectionObserver((entries) => {\n         entries.forEach((entrie) => {\n"
                },
                {
                    "date": 1667208684292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,16 +43,22 @@\n       const filePath = files[active]?.key as string\n       filePath && openFile(filePath)\n       closeSearchFile()\n     }\n-  }\n-  useEffect(() => {\n     const lis = filesContainer.current?.children || []\n     ;[...lis].forEach((li, index) => {\n       li.classList.remove('active')\n     })\n     const target = lis[active]\n     target && target.classList.add('active')\n+  }\n+  useEffect(() => {\n+    // const lis = filesContainer.current?.children || []\n+    // ;[...lis].forEach((li, index) => {\n+    //   li.classList.remove('active')\n+    // })\n+    const target = lis[active]\n+    // target && target.classList.add('active')\n     if(target) {\n       const io = new IntersectionObserver((entries) => {\n         entries.forEach((entrie) => {\n           if (entrie.intersectionRatio < 0.5) {\n"
                },
                {
                    "date": 1667208708521,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,23 +55,23 @@\n     // const lis = filesContainer.current?.children || []\n     // ;[...lis].forEach((li, index) => {\n     //   li.classList.remove('active')\n     // })\n-    const target = lis[active]\n+    // const target = lis[active]\n     // target && target.classList.add('active')\n-    if(target) {\n-      const io = new IntersectionObserver((entries) => {\n-        entries.forEach((entrie) => {\n-          if (entrie.intersectionRatio < 0.5) {\n-            if (active > 8) target?.scrollIntoView(false)\n-            else target?.scrollIntoView(true)\n-          }\n-          // 不论如何都需要移除当前的观察项，保证只有一项\n-          io.unobserve(target)\n-        })\n-      })\n-      io.observe(target)\n-    }\n+    // if(target) {\n+    //   const io = new IntersectionObserver((entries) => {\n+    //     entries.forEach((entrie) => {\n+    //       if (entrie.intersectionRatio < 0.5) {\n+    //         if (active > 8) target?.scrollIntoView(false)\n+    //         else target?.scrollIntoView(true)\n+    //       }\n+    //       // 不论如何都需要移除当前的观察项，保证只有一项\n+    //       io.unobserve(target)\n+    //     })\n+    //   })\n+    //   io.observe(target)\n+    // }\n \n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1667208790200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,34 +51,33 @@\n     const target = lis[active]\n     target && target.classList.add('active')\n   }\n   useEffect(() => {\n-    // const lis = filesContainer.current?.children || []\n-    // ;[...lis].forEach((li, index) => {\n-    //   li.classList.remove('active')\n-    // })\n-    // const target = lis[active]\n-    // target && target.classList.add('active')\n-    // if(target) {\n-    //   const io = new IntersectionObserver((entries) => {\n-    //     entries.forEach((entrie) => {\n-    //       if (entrie.intersectionRatio < 0.5) {\n-    //         if (active > 8) target?.scrollIntoView(false)\n-    //         else target?.scrollIntoView(true)\n-    //       }\n-    //       // 不论如何都需要移除当前的观察项，保证只有一项\n-    //       io.unobserve(target)\n-    //     })\n-    //   })\n-    //   io.observe(target)\n-    // }\n-\n+    const lis = filesContainer.current?.children || []\n+    ;[...lis].forEach((li, index) => {\n+      li.classList.remove('active')\n+    })\n+    const target = lis[active]\n+    target && target.classList.add('active')\n+    if(target) {\n+      const io = new IntersectionObserver((entries) => {\n+        entries.forEach((entrie) => {\n+          if (entrie.intersectionRatio < 0.5) {\n+            if (active > 8) target?.scrollIntoView(false)\n+            else target?.scrollIntoView(true)\n+          }\n+          // 不论如何都需要移除当前的观察项，保证只有一项\n+          io.unobserve(target)\n+        })\n+      })\n+      io.observe(target)\n+    }\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [active])\n+  }, [])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n"
                },
                {
                    "date": 1667208879267,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,45 +21,17 @@\n   const iptRef = useRef<HTMLInputElement>(null)\n   const filesContainer = useRef<HTMLUListElement>(null)\n \n   const [files, setFiles] = useState(mapFiles(fileList))\n-  const hanleSelect = (e: KeyboardEvent) => {\n-    const ARROW_DOWN = 'ArrowDown'\n-    const ARROW_UP = 'ArrowUp'\n-    if (e.code === ARROW_UP) {\n-      if (!files[active - 1]) {\n-        setActive(files.length - 1)\n-      } else {\n-        setActive(active - 1)\n-      }\n-    }\n-    if (e.code === ARROW_DOWN) {\n-      if (!files[active + 1]) {\n-        setActive(0)\n-      } else {\n-        setActive(active + 1)\n-      }\n-    }\n-    if (e.code === 'Enter') {\n-      const filePath = files[active]?.key as string\n-      filePath && openFile(filePath)\n-      closeSearchFile()\n-    }\n-    const lis = filesContainer.current?.children || []\n-    ;[...lis].forEach((li, index) => {\n-      li.classList.remove('active')\n-    })\n-    const target = lis[active]\n-    target && target.classList.add('active')\n-  }\n+\n   useEffect(() => {\n     const lis = filesContainer.current?.children || []\n     ;[...lis].forEach((li, index) => {\n       li.classList.remove('active')\n     })\n     const target = lis[active]\n     target && target.classList.add('active')\n-    if(target) {\n+    if (target) {\n       const io = new IntersectionObserver((entries) => {\n         entries.forEach((entrie) => {\n           if (entrie.intersectionRatio < 0.5) {\n             if (active > 8) target?.scrollIntoView(false)\n@@ -73,11 +45,35 @@\n     }\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n+    const hanleSelect = (e: KeyboardEvent) => {\n+      const ARROW_DOWN = 'ArrowDown'\n+      const ARROW_UP = 'ArrowUp'\n+      if (e.code === ARROW_UP) {\n+        if (!files[active - 1]) {\n+          setActive(files.length - 1)\n+        } else {\n+          setActive(active - 1)\n+        }\n+      }\n+      if (e.code === ARROW_DOWN) {\n+        if (!files[active + 1]) {\n+          setActive(0)\n+        } else {\n+          setActive(active + 1)\n+        }\n+      }\n+      if (e.code === 'Enter') {\n+        const filePath = files[active]?.key as string\n+        filePath && openFile(filePath)\n+        closeSearchFile()\n+      }\n+    }\n     document.addEventListener('keydown', hanleSelect)\n     return () => document.removeEventListener('keydown', hanleSelect)\n-  }, [])\n+    // 因为处理函数里面有依赖到active，所以必须传递这个依赖进去\n+  }, [active])\n   const updateFiles = () => {\n     const searchStr = iptRef.current?.value || ''\n     const newFileList = fileList.filter((file) => {\n       if (file.fileName.toLocaleLowerCase().includes(searchStr.toLocaleLowerCase())) return true\n"
                },
                {
                    "date": 1667208920620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,8 +23,9 @@\n \n   const [files, setFiles] = useState(mapFiles(fileList))\n \n   useEffect(() => {\n+    // 在active更新后执行，否则不会按照你的预定的去\n     const lis = filesContainer.current?.children || []\n     ;[...lis].forEach((li, index) => {\n       li.classList.remove('active')\n     })\n"
                },
                {
                    "date": 1667209057625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,26 +24,28 @@\n   const [files, setFiles] = useState(mapFiles(fileList))\n \n   useEffect(() => {\n     // 在active更新后执行，否则不会按照你的预定的去\n-    const lis = filesContainer.current?.children || []\n-    ;[...lis].forEach((li, index) => {\n-      li.classList.remove('active')\n-    })\n-    const target = lis[active]\n-    target && target.classList.add('active')\n-    if (target) {\n-      const io = new IntersectionObserver((entries) => {\n-        entries.forEach((entrie) => {\n-          if (entrie.intersectionRatio < 0.5) {\n-            if (active > 8) target?.scrollIntoView(false)\n-            else target?.scrollIntoView(true)\n-          }\n-          // 不论如何都需要移除当前的观察项，保证只有一项\n-          io.unobserve(target)\n+    const lis = filesContainer.current?.children\n+    if (lis) {\n+      [...lis].forEach((li, index) => {\n+        li.classList.remove('active')\n+      })\n+      const target = lis[active]\n+      target && target.classList.add('active')\n+      if (target) {\n+        const io = new IntersectionObserver((entries) => {\n+          entries.forEach((entrie) => {\n+            if (entrie.intersectionRatio < 0.5) {\n+              if (active > 8) target?.scrollIntoView(false)\n+              else target?.scrollIntoView(true)\n+            }\n+            // 不论如何都需要移除当前的观察项，保证只有一项\n+            io.unobserve(target)\n+          })\n         })\n-      })\n-      io.observe(target)\n+        io.observe(target)\n+      }\n     }\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                },
                {
                    "date": 1667209738197,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,13 +34,14 @@\n       target && target.classList.add('active')\n       if (target) {\n         const io = new IntersectionObserver((entries) => {\n           entries.forEach((entrie) => {\n-            if (entrie.intersectionRatio < 0.5) {\n+            //如果不可见,就需要向上滚动或者向下滚动\n+            if (entrie.isIntersecting) {\n               if (active > 8) target?.scrollIntoView(false)\n               else target?.scrollIntoView(true)\n             }\n-            // 不论如何都需要移除当前的观察项，保证只有一项\n+            // 不管是否可见，操作完就移除观察\n             io.unobserve(target)\n           })\n         })\n         io.observe(target)\n"
                },
                {
                    "date": 1667209756298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n       if (target) {\n         const io = new IntersectionObserver((entries) => {\n           entries.forEach((entrie) => {\n             //如果不可见,就需要向上滚动或者向下滚动\n-            if (entrie.isIntersecting) {\n+            if (entrie.intersectionRatio < 0.5) {\n               if (active > 8) target?.scrollIntoView(false)\n               else target?.scrollIntoView(true)\n             }\n             // 不管是否可见，操作完就移除观察\n"
                },
                {
                    "date": 1667209817390,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,10 +30,10 @@\n       [...lis].forEach((li, index) => {\n         li.classList.remove('active')\n       })\n       const target = lis[active]\n-      target && target.classList.add('active')\n       if (target) {\n+        target.classList.add('active')\n         const io = new IntersectionObserver((entries) => {\n           entries.forEach((entrie) => {\n             //如果不可见,就需要向上滚动或者向下滚动\n             if (entrie.intersectionRatio < 0.5) {\n@@ -44,8 +44,11 @@\n             io.unobserve(target)\n           })\n         })\n         io.observe(target)\n+      } else {\n+        console.log('error active:')\n+        console.log(active)\n       }\n     }\n   }, [active])\n   useEffect(() => {\n"
                },
                {
                    "date": 1667209833118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,10 +45,9 @@\n           })\n         })\n         io.observe(target)\n       } else {\n-        console.log('error active:')\n-        console.log(active)\n+        console.warn('error active:' + active)\n       }\n     }\n   }, [active])\n   useEffect(() => {\n"
                },
                {
                    "date": 1667209894053,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,25 +30,21 @@\n       [...lis].forEach((li, index) => {\n         li.classList.remove('active')\n       })\n       const target = lis[active]\n-      if (target) {\n-        target.classList.add('active')\n-        const io = new IntersectionObserver((entries) => {\n-          entries.forEach((entrie) => {\n-            //如果不可见,就需要向上滚动或者向下滚动\n-            if (entrie.intersectionRatio < 0.5) {\n-              if (active > 8) target?.scrollIntoView(false)\n-              else target?.scrollIntoView(true)\n-            }\n-            // 不管是否可见，操作完就移除观察\n-            io.unobserve(target)\n-          })\n+      target.classList.add('active')\n+      const io = new IntersectionObserver((entries) => {\n+        entries.forEach((entrie) => {\n+          //如果不可见,就需要向上滚动或者向下滚动\n+          if (entrie.intersectionRatio < 0.5) {\n+            if (active > 8) target?.scrollIntoView(false)\n+            else target?.scrollIntoView(true)\n+          }\n+          // 不管是否可见，操作完就移除观察\n+          io.unobserve(target)\n         })\n-        io.observe(target)\n-      } else {\n-        console.warn('error active:' + active)\n-      }\n+      })\n+      io.observe(target)\n     }\n   }, [active])\n   useEffect(() => {\n     iptRef.current?.focus()\n"
                }
            ],
            "date": 1666160968450,
            "name": "Commit-0",
            "content": "export const SearchFile = () => {\n  return (\n    <div className=\"search-file\">\n      <div>\n        <input type=\"text\" />\n      </div>\n      <ul></ul>\n    </div>\n  )\n}\n"
        }
    ]
}