{
  "sourceFile": "src/main/hooks/useMenu.ts",
  "activeCommit": 0,
  "commits": [
    {
      "activePatchIndex": 5,
      "patches": [
        {
          "date": 1665644213764,
          "content": "Index: \n===================================================================\n--- \n+++ \n"
        },
        {
          "date": 1665644251176,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import { app, BrowserWindow, Menu } from \"electron\"\n+import { openFileSelector } from \"./openFile\"\n \n export const useMenu = (window:BrowserWindow) => {\n     const menu = Menu.buildFromTemplate([\n         {\n@@ -29,9 +30,9 @@\n               accelerator: 'Shift+CmdOrCtrl+H'\n             },\n             {\n               label: '打开',\n-              click: ()=>{openFile(window)}\n+              click: ()=>{openFileSelector(window)}\n             }\n           ]\n         },\n         {\n"
        },
        {
          "date": 1665644272172,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,17 +35,17 @@\n             }\n           ]\n         },\n         {\n-          label: app.name,\n+          label: '显示',\n           submenu: [\n             {\n               click: () => {},\n-              label: 'Increment'\n+              label: '侧边栏'\n             },\n             {\n               click: () => {},\n-              label: 'Decrement'\n+              label: '工具栏'\n             }\n           ]\n         }\n       ])\n"
        },
        {
          "date": 1665645500721,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,16 @@\n import { app, BrowserWindow, Menu } from \"electron\"\n+import { readFileSync } from \"fs\"\n+import { UPDATE_CONTENT } from \"../../common/constant\"\n import { openFileSelector } from \"./openFile\"\n-\n+const openFile = async (window:BrowserWindow) =>{\n+    const paths = await openFileSelector(window)\n+    if(paths) {\n+      const path = paths[0]\n+      const content = readFileSync(path,'utf-8')\n+      window.webContents.send(UPDATE_CONTENT,content)\n+    } \n+  }\n export const useMenu = (window:BrowserWindow) => {\n     const menu = Menu.buildFromTemplate([\n         {\n           label: app.name,\n@@ -30,9 +39,9 @@\n               accelerator: 'Shift+CmdOrCtrl+H'\n             },\n             {\n               label: '打开',\n-              click: ()=>{openFileSelector(window)}\n+              click: ()=>{openFile(window)}\n             }\n           ]\n         },\n         {\n"
        },
        {
          "date": 1665645864023,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import { app, BrowserWindow, Menu } from \"electron\"\n import { readFileSync } from \"fs\"\n import { UPDATE_CONTENT } from \"../../common/constant\"\n-import { openFileSelector } from \"./openFile\"\n+import { openFileSelector } from \"../openFile\"\n const openFile = async (window:BrowserWindow) =>{\n     const paths = await openFileSelector(window)\n     if(paths) {\n       const path = paths[0]\n"
        },
        {
          "date": 1665737333479,
          "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,137 @@\n-import { app, BrowserWindow, Menu } from \"electron\"\n-import { readFileSync } from \"fs\"\n-import { UPDATE_CONTENT } from \"../../common/constant\"\n-import { openFileSelector } from \"../openFile\"\n-const openFile = async (window:BrowserWindow) =>{\n-    const paths = await openFileSelector(window)\n-    if(paths) {\n-      const path = paths[0]\n-      const content = readFileSync(path,'utf-8')\n-      window.webContents.send(UPDATE_CONTENT,content)\n-    } \n+import { app, BrowserWindow, Menu, MenuItemConstructorOptions } from 'electron'\n+import { readFileSync } from 'fs'\n+import { UPDATE_CONTENT } from '../constant'\n+import { openFileSelector } from '../openFile'\n+\n+/* \n+快捷键无法使用问题：https://github.com/moose-team/friends/issues/123\n+快捷键类型：https://juejin.cn/post/7116906625964720159#comment\n+*/\n+const openFile = async (window: BrowserWindow) => {\n+  const paths = await openFileSelector(window)\n+  if (paths) {\n+    const path = paths[0]\n+    const content = readFileSync(path, 'utf-8')\n+    window.webContents.send(UPDATE_CONTENT, {\n+      path,\n+      content\n+    })\n   }\n-export const useMenu = (window:BrowserWindow) => {\n-    const menu = Menu.buildFromTemplate([\n-        {\n-          label: app.name,\n-          submenu: [\n-            {\n-              click: () => {},\n-              label: 'Increment'\n-            },\n-            {\n-              click: () => {},\n-              label: 'Decrement'\n-            }\n-          ]\n-        },\n-        {\n-          label: '文件',\n-          submenu: [\n-            {\n-              click: () => {},\n-              label: '新建',\n-              accelerator: 'Shift+CmdOrCtrl+H'\n-            },\n-            {\n-              click: () => {},\n-              label: '新建标签页',\n-              accelerator: 'Shift+CmdOrCtrl+H'\n-            },\n-            {\n-              label: '打开',\n-              click: ()=>{openFile(window)}\n-            }\n\\ No newline at end of file\n-          ]\n-        },\n-        {\n-          label: '显示',\n-          submenu: [\n-            {\n-              click: () => {},\n-              label: '侧边栏'\n-            },\n-            {\n-              click: () => {},\n-              label: '工具栏'\n-            }\n-          ]\n+}\n+interface DarwinMenuItemConstructorOptions extends MenuItemConstructorOptions {\n+  selector?: string\n+  submenu?: DarwinMenuItemConstructorOptions[] | Menu\n+}\n+\n+export const useMenu = (window: BrowserWindow) => {\n+  const defaultMenuTemplate = {\n+    label:app.name,\n+    submenu:[\n+      {\n+        label:'新建',\n+        click:()=>{}\n+      },\n+    ]\n+  }\n+  const fileMenuTemplate:DarwinMenuItemConstructorOptions = {\n+    label:'文件',\n+    submenu:[\n+      {\n+        label:'新建',\n+        click:()=>{}\n+      },\n+      {\n+        label:'打开',\n+        click:()=>{openFile(window)}\n+      }\n+    ]\n+  }\n+  const aboutMenuTemplate: DarwinMenuItemConstructorOptions = {\n+    label: 'About',\n+    submenu: [\n+      //下一层子菜单\n+      { label: 'Services' },\n+      //分割线\n+      { type: 'separator' },\n+      { label: 'Show All', selector: 'unhideAllApplications:' },\n+      {\n+        label: 'Quit',\n+        //快捷键\n+        accelerator: 'Command+Q',\n+        //点击事件\n+        click: () => {\n+          app.quit()\n         }\n-      ])\n-      Menu.setApplicationMenu(menu)\n-}\n+      }\n+    ]\n+  }\n+  const editMenuTemplate: DarwinMenuItemConstructorOptions = {\n+    label: 'Edit',\n+    submenu: [\n+      { label: 'Cut', accelerator: 'Command+X', selector: 'cut:' },\n+      { label: 'Copy', accelerator: 'Command+C', selector: 'copy:' },\n+      { label: 'Paste', accelerator: 'Command+V', selector: 'paste:' },\n+      {\n+        label: 'new BrowserWindow',\n+        click: () => {}\n+      }\n+    ]\n+  }\n+  const viewMenuTemplate: DarwinMenuItemConstructorOptions = {\n+    label: 'View',\n+    submenu: [\n+      {\n+        label: 'Reload',\n+        accelerator: 'Command+R',\n+        //刷新页面\n+        click: () => {\n+          // this.mainWindow.webContents.reload();\n+        }\n+      },\n+      {\n+        label: 'Toggle Full Screen',\n+        accelerator: 'Ctrl+Command+F',\n+        //全屏\n+        click: () => {\n+          // this.mainWindow.setFullScreen(!this.mainWindow.isFullScreen());\n+        }\n+      },\n+      {\n+        label: 'Toggle Developer Tools',\n+        accelerator: 'Alt+Command+I',\n+        //打开开发工具\n+        click: () => {\n+          // this.mainWindow.webContents.toggleDevTools();\n+        }\n+      }\n+    ]\n+  }\n+  const helpMenuTemplate: DarwinMenuItemConstructorOptions = {\n+    label: 'Help',\n+    submenu: [\n+      {\n+        label: '&设置',\n+        accelerator: 'Ctrl+S',\n+        click: () => {\n+          // createSettingWindow()\n+        }\n+      },\n+      {\n+        label: 'Learn More',\n+        click() {\n+          // shell.openExternal('https://electronjs.org');\n+        }\n+      }\n+    ]\n+  }\n+  const template: DarwinMenuItemConstructorOptions[] = [\n+    defaultMenuTemplate,\n+    fileMenuTemplate,\n+    aboutMenuTemplate,\n+    editMenuTemplate,\n+    viewMenuTemplate,\n+    helpMenuTemplate\n+  ]\n+  const menu = Menu.buildFromTemplate(template)\n+  Menu.setApplicationMenu(menu)\n+}\n"
        }
      ],
      "date": 1665644213764,
      "name": "Commit-0",
      "content": "import { app, BrowserWindow, Menu } from \"electron\"\n\nexport const useMenu = (window:BrowserWindow) => {\n    const menu = Menu.buildFromTemplate([\n        {\n          label: app.name,\n          submenu: [\n            {\n              click: () => {},\n              label: 'Increment'\n            },\n            {\n              click: () => {},\n              label: 'Decrement'\n            }\n          ]\n        },\n        {\n          label: '文件',\n          submenu: [\n            {\n              click: () => {},\n              label: '新建',\n              accelerator: 'Shift+CmdOrCtrl+H'\n            },\n            {\n              click: () => {},\n              label: '新建标签页',\n              accelerator: 'Shift+CmdOrCtrl+H'\n            },\n            {\n              label: '打开',\n              click: ()=>{openFile(window)}\n            }\n          ]\n        },\n        {\n          label: app.name,\n          submenu: [\n            {\n              click: () => {},\n              label: 'Increment'\n            },\n            {\n              click: () => {},\n              label: 'Decrement'\n            }\n          ]\n        }\n      ])\n      Menu.setApplicationMenu(menu)\n}"
    }
  ]
}
